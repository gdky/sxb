<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="yxtkType">
      <Property name="creationType">gov.hygs.htgl.entity.Yxtk</Property>
      <PropertyDef name="id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="flId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="userId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <Reference name="user">
        <Property name="dataType">[userType]</Property>
        <Property name="parameter">$${this.userId}</Property>
        <Property name="dataProvider">yxtkglController#getUserInfoByUserId</Property>
      </Reference>
      <PropertyDef name="createDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="spDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="sprId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="deptid">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <Reference name="dept">
        <Property name="dataType">[deptType]</Property>
        <Property name="dataProvider">yxtkglController#getDeptInfoByDeptId</Property>
        <Property name="parameter">$${this.deptid}</Property>
      </Reference>
      <PropertyDef name="content">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="tmfz">
        <Property name="dataType">Double</Property>
      </PropertyDef>
      <PropertyDef name="tmnd">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="tmlyId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="mode">
        <Property></Property>
      </PropertyDef>
      <Reference name="yxtkxzx">
        <Property name="parameter">$${this.id}</Property>
        <Property name="dataType">[yxtkxzxType]</Property>
        <Property name="dataProvider">yxtkglController#getYxtkxzxInfoByYxtkId</Property>
      </Reference>
      <Reference name="daxzx">
        <Property name="dataType">[yxtkxzxType]</Property>
        <Property name="dataProvider">yxtkglController#getDaXzxInfoByYxtkId</Property>
        <Property name="parameter">$${this.id}</Property>
      </Reference>
      <Reference name="tof">
        <Property name="dataType">[yxtkxzxType]</Property>
        <Property name="dataProvider">yxtkglController#getToFInfo</Property>
      </Reference>
    </DataType>
    <DataType name="yxtkdaType">
      <Property name="creationType">gov.hygs.htgl.entity.Yxtkda</Property>
      <PropertyDef name="id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="tkId">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="tkxzxid">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="yxtkxzxType">
      <Property name="creationType">gov.hygs.htgl.entity.Yxtkxzx</Property>
      <PropertyDef name="id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="tkId">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="xzKey">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="content">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="deptType">
      <Property name="creationType">gov.hygs.htgl.entity.Dept</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="dept_name">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="parentId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
      </PropertyDef>
      <Reference name="dept">
        <Property name="dataType">[SELF]</Property>
        <Property name="dataProvider">qzBmCdglController#getCurrentDeptById</Property>
        <Property name="parameter">$${this.id_}</Property>
      </Reference>
      <Reference name="user">
        <Property name="dataType">[userType]</Property>
        <Property name="parameter">$${this.id_}</Property>
        <Property name="dataProvider">yxtkglController#getUserByDeptId</Property>
      </Reference>
    </DataType>
    <DataType name="userType">
      <Property name="creationType">gov.hygs.htgl.entity.User</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="user_Name">
        <Property></Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <Container id="datasets">
      <DataSet id="dsYxtk">
        <Property name="dataType">[yxtkType]</Property>
        <Property name="dataProvider">yxtkglController#getYxtkInfo</Property>
        <Property name="pageSize">5</Property>
      </DataSet>
      <DataSet id="dsDept">
        <Property name="dataType">[deptType]</Property>
        <Property name="dataProvider">qzBmCdglController#getDeptRoot</Property>
      </DataSet>
      <DataSet id="dsUser">
        <Property name="dataProvider">yxtkglController#getUserByDeptId</Property>
        <Property name="dataType">[userType]</Property>
      </DataSet>
    </Container>
    <Container id="dropDowns">
      <CustomDropDown id="customDropDown">
        <Property name="autoOpen">true</Property>
        <Property name="height">500</Property>
        <DataTree id="datatree">
          <ClientEvent name="onDataRowClick">var user = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).current;&#xD;
var dropDown = dorado.widget.DropDown.findDropDown(self);&#xD;
var node = self.get(&quot;currentNode&quot;);&#xD;
var deptId = node.get(&quot;data&quot;).get(&quot;id_&quot;);&#xD;
dropDown.close(&#xD;
	node.get(&quot;data&quot;).get(&quot;dept_name&quot;)&#xD;
);&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).set({deptid:deptId});&#xD;
&#xD;
view.get(&quot;#userName&quot;).set(&quot;readOnly&quot;,false);&#xD;
if(user == undefined){&#xD;
	view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).insert();&#xD;
}else{&#xD;
	view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).set({userId:&quot;&quot;});&#xD;
	view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).clear();&#xD;
	view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).insert();&#xD;
	//view.get(&quot;#yxtkForm&quot;).set({userName:&quot;aaa&quot;});&#xD;
}&#xD;
&#xD;
&#xD;
</ClientEvent>
          <Property name="currentNodeDataPath">current_Node</Property>
          <Property name="dataSet">dsDept</Property>
          <BindingConfigs>
            <BindingConfig>
              <Property name="childrenProperty">dept</Property>
              <Property name="name">dept_name</Property>
              <Property name="labelProperty">dept_name</Property>
              <Property name="recursive">true</Property>
            </BindingConfig>
          </BindingConfigs>
        </DataTree>
      </CustomDropDown>
      <DataSetDropDown id="dataSetDropDown">
        <ClientEvent name="onClose">var user = view.get(&quot;#dsDept&quot;).getData(&quot;!current_Node.user&quot;).current;&#xD;
if(user != undefined){&#xD;
	view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).set({userId:user.get(&quot;id_&quot;)});&#xD;
}&#xD;
</ClientEvent>
        <Property name="dataPath">!current_Node.user</Property>
        <Property name="autoOpen">true</Property>
        <Property name="property">user_Name</Property>
        <Property name="height">500</Property>
        <Property name="dataSet">dsDept</Property>
      </DataSetDropDown>
      <CustomDropDown id="customDropDown2">
        <Property name="autoOpen">true</Property>
        <Property name="height">500</Property>
        <DataTree id="datatree2">
          <ClientEvent name="onDataRowClick">var user = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).current;&#xD;
var dropDown = dorado.widget.DropDown.findDropDown(self);&#xD;
var node = self.get(&quot;currentNode&quot;);&#xD;
var deptId = node.get(&quot;data&quot;).get(&quot;id_&quot;);&#xD;
dropDown.close(&#xD;
	node.get(&quot;data&quot;).get(&quot;dept_name&quot;)&#xD;
);&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).set({deptid:deptId});&#xD;
&#xD;
//view.get(&quot;#userInfoName&quot;).set(&quot;readOnly&quot;,false);&#xD;
&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).set({userId:&quot;&quot;});&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).current.set({user_Name:&quot;&quot;});&#xD;
//view.get(&quot;#dsYxtk&quot;).getData(&quot;#.dept_user&quot;).flush();&#xD;
</ClientEvent>
          <Property name="dataSet">dsDept</Property>
          <BindingConfigs>
            <BindingConfig>
              <Property name="childrenProperty">dept</Property>
              <Property name="name">dept_name</Property>
              <Property name="labelProperty">dept_name</Property>
              <Property name="recursive">true</Property>
            </BindingConfig>
          </BindingConfigs>
        </DataTree>
      </CustomDropDown>
      <DataSetDropDown id="dataSetDropDown2">
        <ClientEvent name="onClose">var user = view.get(&quot;#dsUser&quot;).getData(&quot;#&quot;);&#xD;
if(user != undefined){&#xD;
	view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).set({userId:user.get(&quot;id_&quot;)});&#xD;
}&#xD;
</ClientEvent>
        <ClientEvent name="beforeExecute">var deptId = view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;deptid&quot;);&#xD;
view.get(&quot;#dsUser&quot;).set(&quot;parameter&quot;,deptId);&#xD;
view.get(&quot;#dsUser&quot;).flush();&#xD;
</ClientEvent>
        <Property name="autoOpen">true</Property>
        <Property name="property">user_Name</Property>
        <Property name="height">500</Property>
        <Property name="dataSet">dsUser</Property>
      </DataSetDropDown>
    </Container>
    <Container id="dialogs">
      <Dialog id="dialog">
        <Property name="height">500</Property>
        <Property name="width">700</Property>
        <Buttons>
          <Button>
            <ClientEvent name="onClick">var mode = view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;mode&quot;);&#xD;
var entity = view.get('#yxtkxzxGrid.selection');&#xD;
if(entity == undefined || entity == &quot;&quot;){&#xD;
	throw new dorado.Exception(&quot;请勾选正确答案！&quot;)&#xD;
	return false;&#xD;
}&#xD;
&#xD;
if(entity != undefined &amp;&amp; entity != &quot;&quot;){&#xD;
	view.get(&quot;#daGrid&quot;).set(&quot;visible&quot;,true);&#xD;
	var da = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;);&#xD;
&#xD;
	if(da.current == undefined){&#xD;
	&#xD;
	&#xD;
			if(mode == 1){&#xD;
				da.clear();&#xD;
				//da.insert({tkId:entity.get(&quot;tkId&quot;)});&#xD;
				da.insert({id:entity.get(&quot;id&quot;),tkId:entity.get(&quot;tkId&quot;),&#xD;
							xzKey:entity.get(&quot;xzKey&quot;),content:entity.get(&quot;content&quot;)});&#xD;
			}else if(mode == 2){&#xD;
				da.clear();&#xD;
				entity.each(function(e){&#xD;
					//da.insert({tkId:e.get(&quot;tkId&quot;)});&#xD;
					da.insert({id:e.get(&quot;id&quot;),tkId:e.get(&quot;tkId&quot;),&#xD;
							xzKey:e.get(&quot;xzKey&quot;),content:e.get(&quot;content&quot;)});&#xD;
				});&#xD;
			}&#xD;
	&#xD;
	}else{&#xD;
		if(mode == 1){&#xD;
			if(da.current.get(&quot;id&quot;) != entity.get(&quot;id&quot;)){		//&#xD;
				da.current.remove();&#xD;
				da.insert({id:entity.get(&quot;id&quot;),tkId:entity.get(&quot;tkId&quot;),&#xD;
						xzKey:entity.get(&quot;xzKey&quot;),content:entity.get(&quot;content&quot;)});&#xD;
				}&#xD;
			}else if(mode == 2){&#xD;
				&#xD;
				da.each(function(d){&#xD;
				var i = 0;&#xD;
				entity.each(function(e){&#xD;
					if(d.get(&quot;id&quot;) == e.get(&quot;id&quot;)){		//&#xD;
						i++;&#xD;
					}&#xD;
				});&#xD;
				if(i == 0){&#xD;
					d.remove();&#xD;
				}&#xD;
			});&#xD;
			&#xD;
			entity.each(function(e){&#xD;
				var j = 0;&#xD;
				da.each(function(d){&#xD;
					if(d.get(&quot;id&quot;) == e.get(&quot;id&quot;)){		//&#xD;
						j++;&#xD;
					}&#xD;
				});&#xD;
				if(j == 0){&#xD;
					da.insert({id:e.get(&quot;id&quot;),tkId:e.get(&quot;tkId&quot;),&#xD;
					xzKey:e.get(&quot;xzKey&quot;),content:e.get(&quot;content&quot;)});&#xD;
				}&#xD;
			});&#xD;
		}&#xD;
&#xD;
	}&#xD;
		&#xD;
}&#xD;
	&#xD;
//action.execute&#xD;
view.get(&quot;#dialog&quot;).close();&#xD;
view.get(&quot;#updateAction&quot;).execute();&#xD;
&#xD;
</ClientEvent>
            <Property name="caption">提交</Property>
          </Button>
          <Button>
            <ClientEvent name="onClick">view.get(&quot;#dsYxtk&quot;).getData(&quot;#.yxtkxzx&quot;).cancel();&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;).cancel();&#xD;
view.get(&quot;#dialog&quot;).close();</ClientEvent>
            <Property name="caption">取消</Property>
          </Button>
        </Buttons>
        <Children>
          <Label id="contentLable"/>
          <ToolBar>
            <Button>
              <ClientEvent name="onClick">var id = view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;id&quot;);&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#.yxtkxzx&quot;).insert({tkId:id});&#xD;
</ClientEvent>
              <Property name="caption">添加</Property>
            </Button>
            <Button>
              <ClientEvent name="onClick">var current = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.yxtkxzx&quot;).current;&#xD;
if(current != undefined){&#xD;
	//daxzx&#xD;
	dorado.MessageBox.confirm(&quot;真的要删除当前数据？&quot;,function(){&#xD;
		var daxzxs = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;);&#xD;
		daxzxs.each(function(daxzx){&#xD;
			if(current.get(&quot;xzKey&quot;) == daxzx.get(&quot;xzKey&quot;)){&#xD;
				daxzx.remove();&#xD;
			}&#xD;
		});&#xD;
		current.remove();&#xD;
	});&#xD;
}&#xD;
</ClientEvent>
              <Property name="caption">删除</Property>
            </Button>
            <Button>
              <ClientEvent name="onClick">var entity = view.get('#yxtkxzxGrid.selection');&#xD;
var mode = view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;mode&quot;);&#xD;
if(entity != undefined &amp;&amp; entity != &quot;&quot;){&#xD;
	view.get(&quot;#daGrid&quot;).set(&quot;visible&quot;,true);&#xD;
	var da = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;);&#xD;
	&#xD;
	if(da.current == undefined){&#xD;
		if(mode == 1){&#xD;
			da.clear();&#xD;
			da.insert({id:entity.get(&quot;id&quot;),tkId:entity.get(&quot;tkId&quot;),&#xD;
					xzKey:entity.get(&quot;xzKey&quot;),content:entity.get(&quot;content&quot;)});&#xD;
		}else if(mode == 2){&#xD;
			da.clear();&#xD;
			entity.each(function(e){&#xD;
				da.insert({id:e.get(&quot;id&quot;),tkId:e.get(&quot;tkId&quot;),&#xD;
					xzKey:e.get(&quot;xzKey&quot;),content:e.get(&quot;content&quot;)});&#xD;
			});&#xD;
		}&#xD;
	}else{&#xD;
		&#xD;
		if(mode == 1){&#xD;
			if(da.current.get(&quot;id&quot;) != entity.get(&quot;id&quot;)){		//&#xD;
				da.current.remove();&#xD;
				da.insert({id:entity.get(&quot;id&quot;),tkId:entity.get(&quot;tkId&quot;),&#xD;
					xzKey:entity.get(&quot;xzKey&quot;),content:entity.get(&quot;content&quot;)});&#xD;
			}&#xD;
		}else if(mode == 2){&#xD;
			&#xD;
			da.each(function(d){&#xD;
				var i = 0;//&#xD;
				entity.each(function(e){&#xD;
					if(d.get(&quot;id&quot;) == e.get(&quot;id&quot;)){		//&#xD;
						i++;&#xD;
					}&#xD;
				});&#xD;
				if(i == 0){&#xD;
					d.remove();&#xD;
				}&#xD;
			});&#xD;
			entity.each(function(e){&#xD;
				var j = 0;&#xD;
				da.each(function(d){&#xD;
					if(d.get(&quot;id&quot;) == e.get(&quot;id&quot;)){		//&#xD;
						j++;&#xD;
					}&#xD;
				});&#xD;
				if(j == 0){&#xD;
					da.insert({id:e.get(&quot;id&quot;),tkId:e.get(&quot;tkId&quot;),&#xD;
					xzKey:e.get(&quot;xzKey&quot;),content:e.get(&quot;content&quot;)});&#xD;
				}&#xD;
			});&#xD;
		}&#xD;
		&#xD;
	}&#xD;
	&#xD;
}	&#xD;
&#xD;
//action.execute&#xD;
view.get(&quot;#updateAction&quot;).execute();</ClientEvent>
              <Property name="caption">保存</Property>
            </Button>
          </ToolBar>
          <DataGrid id="yxtkxzxGrid">
            <Property name="dataSet">dsYxtk</Property>
            <Property name="dataPath">#.yxtkxzx</Property>
            <Property name="height">200</Property>
            <RowSelectorColumn/>
            <DataColumn name="id">
              <Property name="property">id</Property>
            </DataColumn>
            <DataColumn name="tkId">
              <Property name="property">tkId</Property>
            </DataColumn>
            <DataColumn name="xzKey">
              <Property name="property">xzKey</Property>
            </DataColumn>
            <DataColumn name="content">
              <Property name="property">content</Property>
            </DataColumn>
          </DataGrid>
          <DataGrid id="daGrid">
            <Property name="dataSet">dsYxtk</Property>
            <Property name="dataPath">#.daxzx</Property>
            <DataColumn name="id">
              <Property name="property">id</Property>
            </DataColumn>
            <DataColumn name="tkId">
              <Property name="property">tkId</Property>
            </DataColumn>
            <DataColumn name="xzKey">
              <Property name="property">xzKey</Property>
            </DataColumn>
            <DataColumn name="content">
              <Property name="property">content</Property>
            </DataColumn>
          </DataGrid>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="yxtkDialog">
        <Property name="height">500</Property>
        <Property name="width">700</Property>
        <Buttons>
          <Button>
            <ClientEvent name="onClick">view.get(&quot;#updateAction&quot;).execute(function(){&#xD;
	view.get(&quot;#yxtkDialog&quot;).close();&#xD;
});&#xD;
</ClientEvent>
            <Property name="caption">提交</Property>
          </Button>
          <Button>
            <ClientEvent name="onClick">view.get(&quot;#dsYxtk&quot;).getData(&quot;#.user&quot;).cancel();&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#.dept&quot;).cancel();&#xD;
view.get(&quot;#dsYxtk&quot;).getData().cancel();&#xD;
view.get(&quot;#yxtkDialog&quot;).close();&#xD;
&#xD;
</ClientEvent>
            <Property name="caption">取消</Property>
          </Button>
        </Buttons>
        <Children>
          <AutoForm id="yxtkForm">
            <Property name="dataSet">dsYxtk</Property>
            <AutoFormElement>
              <Property name="name">id</Property>
              <Property name="property">id</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">flId</Property>
              <Property name="property">flId</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">deptid</Property>
              <Property name="property">deptid</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">userId</Property>
              <Property name="property">userId</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement id="deptName">
              <Property name="trigger">customDropDown</Property>
              <Property name="label">部门</Property>
              <Property name="dataPath">#.dept</Property>
              <Property name="name">dept_name</Property>
              <Property name="property">dept_name</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement id="userName">
              <Property name="trigger">dataSetDropDown</Property>
              <Property name="label">用户</Property>
              <Property name="readOnly">true</Property>
              <Property name="dataPath">#.user</Property>
              <Property name="name">user_Name</Property>
              <Property name="property">user_Name</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">createDate</Property>
              <Property name="property">createDate</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">spDate</Property>
              <Property name="property">spDate</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">sprId</Property>
              <Property name="property">sprId</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">content</Property>
              <Property name="property">content</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">tmfz</Property>
              <Property name="property">tmfz</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">tmnd</Property>
              <Property name="property">tmnd</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">tmlyId</Property>
              <Property name="property">tmlyId</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement>
              <Property name="name">mode</Property>
              <Property name="property">mode</Property>
              <Editor/>
            </AutoFormElement>
          </AutoForm>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="tofDialog">
        <Property name="height">500</Property>
        <Property name="width">700</Property>
        <Buttons>
          <Button>
            <ClientEvent name="onClick">var entity = view.get('#yxtktofGrid.selection');&#xD;
if(entity == undefined || entity == &quot;&quot;){&#xD;
	throw new dorado.Exception(&quot;请勾选正确答案！&quot;)&#xD;
	return false;&#xD;
}&#xD;
&#xD;
if(entity != undefined &amp;&amp; entity != &quot;&quot;){&#xD;
	view.get(&quot;#datofGrid&quot;).set(&quot;visible&quot;,true);&#xD;
	var da = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;);&#xD;
	&#xD;
	if(da.current == undefined){&#xD;
	&#xD;
		da.clear();&#xD;
		da.insert({id:entity.get(&quot;id&quot;),tkId:view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;id&quot;),//entity.get(&quot;tkId&quot;),&#xD;
					xzKey:entity.get(&quot;xzKey&quot;),content:entity.get(&quot;content&quot;)});&#xD;
	&#xD;
	}else{&#xD;
		if(da.current.get(&quot;xzKey&quot;) != entity.get(&quot;xzKey&quot;)){		//&#xD;
			da.current.remove();&#xD;
			da.insert({id:entity.get(&quot;id&quot;),tkId:view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;id&quot;),//entity.get(&quot;tkId&quot;),&#xD;
					xzKey:entity.get(&quot;xzKey&quot;),content:entity.get(&quot;content&quot;)});&#xD;
			}&#xD;
	}&#xD;
		&#xD;
}&#xD;
	&#xD;
//action.execute&#xD;
view.get(&quot;#tofDialog&quot;).close();&#xD;
view.get(&quot;#updateAction&quot;).execute();&#xD;
//yxtktofGrid&#xD;
//datofGrid</ClientEvent>
            <Property name="caption">提交</Property>
          </Button>
          <Button>
            <ClientEvent name="onClick">view.get(&quot;#tofDialog&quot;).close();</ClientEvent>
            <Property name="caption">取消</Property>
          </Button>
        </Buttons>
        <Children>
          <Label id="tofcontentLable"/>
          <DataGrid id="yxtktofGrid">
            <Property name="dataSet">dsYxtk</Property>
            <Property name="dataPath">#.tof</Property>
            <Property name="height">200</Property>
            <RowSelectorColumn/>
            <DataColumn name="id">
              <Property name="property">id</Property>
            </DataColumn>
            <DataColumn name="tkId">
              <Property name="property">tkId</Property>
            </DataColumn>
            <DataColumn name="xzKey">
              <Property name="property">xzKey</Property>
            </DataColumn>
            <DataColumn name="content">
              <Property name="property">content</Property>
            </DataColumn>
          </DataGrid>
          <DataGrid id="datofGrid">
            <Property name="dataSet">dsYxtk</Property>
            <Property name="dataPath">#.daxzx</Property>
            <DataColumn name="id">
              <Property name="property">id</Property>
            </DataColumn>
            <DataColumn name="tkId">
              <Property name="property">tkId</Property>
            </DataColumn>
            <DataColumn name="xzKey">
              <Property name="property">xzKey</Property>
            </DataColumn>
            <DataColumn name="content">
              <Property name="property">content</Property>
            </DataColumn>
          </DataGrid>
        </Children>
        <Tools/>
      </Dialog>
    </Container>
    <Container>
      <ToolBar>
        <Button>
          <ClientEvent name="onClick">var yxtks = view.get(&quot;#dsYxtk&quot;).getData();&#xD;
if(yxtks.current == null){&#xD;
	view.get(&quot;#dsYxtk&quot;).insert({&#xD;
		id: 1&#xD;
	});&#xD;
}else{&#xD;
	var i = 1;&#xD;
	var j = 0;&#xD;
	yxtks.each(function(yxtk){&#xD;
		if(i != yxtk.get(&quot;id&quot;) &amp;&amp; j == 0){&#xD;
			j++;&#xD;
		}&#xD;
		if(j == 0){&#xD;
			i++;&#xD;
		}&#xD;
	});&#xD;
	view.get(&quot;#dsYxtk&quot;).insert({id:i});&#xD;
}&#xD;
view.get(&quot;#dsYxtk&quot;).getData(&quot;#.dept&quot;).insert();&#xD;
view.get(&quot;#yxtkDialog&quot;).show();</ClientEvent>
          <Property name="caption">增加</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">var current = view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;);&#xD;
if(current != undefined){&#xD;
	dorado.MessageBox.confirm(&quot;真的要删除当前数据？&quot;,function(){&#xD;
		var das = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;);&#xD;
		var xzs = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.yxtkxzx&quot;);&#xD;
		das.each(function(da){&#xD;
			da.remove();&#xD;
		});&#xD;
		xzs.each(function(xz){&#xD;
			xz.remove();&#xD;
		});&#xD;
		current.remove();&#xD;
		view.get(&quot;#updateAction&quot;).execute();&#xD;
	});&#xD;
}&#xD;
</ClientEvent>
          <Property name="caption">删除</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">//view.get(&quot;#userInfoName&quot;).set(&quot;readOnly&quot;,true);&#xD;
view.get(&quot;#updateAction&quot;).execute();&#xD;
&#xD;
//var dept = view.get(&quot;#dsDept&quot;).getData(&quot;#&quot;).get(&quot;id_&quot;);&#xD;
//alert(dept);&#xD;
</ClientEvent>
          <Property name="caption">保存</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">var dsYxtk = view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;);&#xD;
var content = dsYxtk.get(&quot;content&quot;);&#xD;
var mode = dsYxtk.get(&quot;mode&quot;);&#xD;
&#xD;
if(mode == 1){&#xD;
	content = content + &quot;(单选题)&quot;;&#xD;
	view.get(&quot;#yxtkxzxGrid&quot;).set(&quot;selectionMode&quot;,&quot;singleRow&quot;);&#xD;
}else if(mode == 2){&#xD;
	content = content + &quot;(多选题)&quot;;&#xD;
	view.get(&quot;#yxtkxzxGrid&quot;).set(&quot;selectionMode&quot;,&quot;multiRows&quot;);&#xD;
}else if(mode == 0){&#xD;
	content = content + &quot;(判断题)&quot;;&#xD;
	view.get(&quot;#yxtktofGrid&quot;).set(&quot;selectionMode&quot;,&quot;singleRow&quot;);&#xD;
}&#xD;
&#xD;
var entity = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.daxzx&quot;);&#xD;
&#xD;
if(mode ==1 || mode == 2){&#xD;
	//单选或多选题&#xD;
	if(entity.current == undefined){&#xD;
		view.get(&quot;#daGrid&quot;).set(&quot;visible&quot;,false);&#xD;
	}else{&#xD;
		var xzs = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.yxtkxzx&quot;);&#xD;
		view.get(&quot;#daGrid&quot;).set(&quot;visible&quot;,true);&#xD;
		entity.each(function(da){&#xD;
			xzs.each(function(xz){&#xD;
				if(da.get(&quot;id&quot;) == xz.get(&quot;id&quot;)){//用da.tkxzxid与xzx.id进行配对&#xD;
					//选项(xz)被勾选上&#xD;
					alert(xz.get(&quot;xzKey&quot;));&#xD;
					//var select = view.get('#yxtkxzxGrid.selection');&#xD;
					//view.get(&quot;#yxtkxzxGrid&quot;).set(&quot;selection&quot;,xz);&#xD;
				}&#xD;
			});&#xD;
		});&#xD;
	}&#xD;
	view.get(&quot;#contentLable&quot;).set(&quot;text&quot;,content);&#xD;
	view.get(&quot;#dialog&quot;).show();&#xD;
}else{&#xD;
	//判断题&#xD;
	if(entity.current == undefined){&#xD;
		view.get(&quot;#datofGrid&quot;).set(&quot;visible&quot;,false);&#xD;
	}else{&#xD;
		var xzs = view.get(&quot;#dsYxtk&quot;).getData(&quot;#.tof&quot;);&#xD;
		view.get(&quot;#datofGrid&quot;).set(&quot;visible&quot;,true);&#xD;
		//alert(xzs);&#xD;
		&#xD;
		entity.each(function(da){&#xD;
			xzs.each(function(xz){&#xD;
				if(da.get(&quot;xzKey&quot;) == xz.get(&quot;xzKey&quot;)){//用da.xzKey与xzx.xzKey进行配对&#xD;
					//选项(xz)被勾选上&#xD;
					alert(xz.get(&quot;xzKey&quot;));&#xD;
					da.set({tkId:view.get(&quot;#dsYxtk&quot;).getData(&quot;#&quot;).get(&quot;id&quot;)});&#xD;
					//var select = view.get('#yxtktofGrid.selection');&#xD;
					//view.get(&quot;#yxtktofGrid&quot;).set(&quot;selection&quot;,xz);&#xD;
				}&#xD;
			});&#xD;
		});&#xD;
		&#xD;
		&#xD;
	}&#xD;
	view.get(&quot;#tofcontentLable&quot;).set(&quot;text&quot;,content);	&#xD;
	view.get(&quot;#tofDialog&quot;).show();&#xD;
}&#xD;
</ClientEvent>
          <Property name="caption">查看</Property>
        </Button>
      </ToolBar>
      <AutoForm id="yxtkInForm">
        <Property name="dataSet">dsYxtk</Property>
        <AutoFormElement>
          <Property name="name">id</Property>
          <Property name="property">id</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">flId</Property>
          <Property name="property">flId</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">userId</Property>
          <Property name="property">userId</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">user_Name</Property>
          <Property name="property">user_Name</Property>
          <Property name="dataPath">#.user</Property>
          <Property name="trigger">dataSetDropDown2</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">createDate</Property>
          <Property name="property">createDate</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">spDate</Property>
          <Property name="property">spDate</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">sprId</Property>
          <Property name="property">sprId</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">deptid</Property>
          <Property name="property">deptid</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">dept_name</Property>
          <Property name="property">dept_name</Property>
          <Property name="dataPath">#.dept</Property>
          <Property name="trigger">customDropDown2</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">content</Property>
          <Property name="property">content</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">tmfz</Property>
          <Property name="property">tmfz</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">tmnd</Property>
          <Property name="property">tmnd</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">tmlyId</Property>
          <Property name="property">tmlyId</Property>
          <Editor/>
        </AutoFormElement>
        <AutoFormElement>
          <Property name="name">mode</Property>
          <Property name="property">mode</Property>
          <Editor/>
        </AutoFormElement>
      </AutoForm>
      <ToolBar>
        <DataPilot>
          <Property name="dataSet">dsYxtk</Property>
          <Property name="itemCodes">pages,pageSize</Property>
        </DataPilot>
      </ToolBar>
      <DataGrid>
        <Property name="dataSet">dsYxtk</Property>
        <Property name="readOnly">true</Property>
        <DataColumn name="id">
          <Property name="property">id</Property>
        </DataColumn>
        <DataColumn name="flId">
          <Property name="property">flId</Property>
        </DataColumn>
        <DataColumn name="userId">
          <Property name="property">userId</Property>
        </DataColumn>
        <DataColumn name="user">
          <Property name="property">user.user_Name</Property>
        </DataColumn>
        <DataColumn name="createDate">
          <Property name="property">createDate</Property>
        </DataColumn>
        <DataColumn name="spDate">
          <Property name="property">spDate</Property>
        </DataColumn>
        <DataColumn name="sprId">
          <Property name="property">sprId</Property>
        </DataColumn>
        <DataColumn name="deptid">
          <Property name="property">deptid</Property>
        </DataColumn>
        <DataColumn name="dept">
          <Property name="property">dept.dept_name</Property>
        </DataColumn>
        <DataColumn name="content">
          <Property name="property">content</Property>
        </DataColumn>
        <DataColumn name="tmfz">
          <Property name="property">tmfz</Property>
        </DataColumn>
        <DataColumn name="tmnd">
          <Property name="property">tmnd</Property>
        </DataColumn>
        <DataColumn name="tmlyId">
          <Property name="property">tmlyId</Property>
        </DataColumn>
        <DataColumn name="mode">
          <Property name="property">mode</Property>
        </DataColumn>
      </DataGrid>
    </Container>
    <UpdateAction id="updateAction">
      <Property name="dataResolver">yxtkglController#updateYxtk</Property>
      <UpdateItem>
        <Property name="dataSet">dsYxtk</Property>
      </UpdateItem>
    </UpdateAction>
  </View>
</ViewConfig>
