<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="tktmType">
      <Property name="creationType">gov.hygs.htgl.entity.Tktm</Property>
      <PropertyDef name="id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="flId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="tkfl">
        <Property name="label">所属分类</Property>
      </PropertyDef>
      <PropertyDef name="userId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="user">
        <Property name="label">录入人</Property>
      </PropertyDef>
      <PropertyDef name="createDate">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="spDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="sprId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="deptid">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="dept">
        <Property name="label">部门名称</Property>
      </PropertyDef>
      <PropertyDef name="content">
        <Property></Property>
        <Property name="label">提干内容</Property>
      </PropertyDef>
      <PropertyDef name="tmfz">
        <Property name="dataType">Double</Property>
        <Property name="label">题目分值</Property>
      </PropertyDef>
      <PropertyDef name="tmnd">
        <Property name="dataType">Integer</Property>
        <Property name="label">题目难度</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">0</Property>
                <Property name="value">税收业务类基础题</Property>
              </Entity>
              <Entity>
                <Property name="key">1</Property>
                <Property name="value">税收业务类进阶题</Property>
              </Entity>
              <Entity>
                <Property name="key">2</Property>
                <Property name="value">非税收业务类</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="tmlyId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="tmly">
        <Property name="label">题目来源</Property>
      </PropertyDef>
      <PropertyDef name="mode">
        <Property></Property>
        <Property name="label">选择类型</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="value">判断题</Property>
                <Property name="key">0</Property>
              </Entity>
              <Entity>
                <Property name="value">单选题</Property>
                <Property name="key">1</Property>
              </Entity>
              <Entity>
                <Property name="value">多选题</Property>
                <Property name="key">2</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="yxbz">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="xybz">
        <Property></Property>
        <Property name="label">是否选中</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">N</Property>
                <Property name="value">未选上</Property>
              </Entity>
              <Entity>
                <Property name="key">Y</Property>
                <Property name="value">已选上</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
    </DataType>
    <DataType name="deptType">
      <Property name="creationType">gov.hygs.htgl.entity.Dept</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="dept_name">
        <Property></Property>
        <Property name="label">部门名称</Property>
      </PropertyDef>
      <PropertyDef name="parentId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
      </PropertyDef>
      <Reference name="dept">
        <Property name="dataType">[SELF]</Property>
        <Property name="dataProvider">qzBmCdglController#getCurrentDeptById</Property>
        <Property name="parameter">$${this.id_}</Property>
      </Reference>
      <Reference name="user">
        <Property name="dataType">[userType]</Property>
        <Property name="parameter">$${this.id_}</Property>
        <Property name="dataProvider">yxtkglController#getUserByDeptId</Property>
      </Reference>
    </DataType>
    <DataType name="userType">
      <Property name="creationType">gov.hygs.htgl.entity.User</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="user_Name">
        <Property></Property>
        <Property name="label">录入人</Property>
      </PropertyDef>
    </DataType>
    <DataType name="conditonType">
      <PropertyDef name="begin">
        <Property name="dataType">DateTime</Property>
        <Property name="label">考试时间起</Property>
      </PropertyDef>
      <PropertyDef name="end">
        <Property name="dataType">DateTime</Property>
        <Property name="label">考试时间止</Property>
      </PropertyDef>
      <PropertyDef name="tsrq">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
        <Property name="label">描述</Property>
      </PropertyDef>
      <PropertyDef name="groupId"/>
      <PropertyDef name="groupname">
        <Property name="label">群组名称</Property>
      </PropertyDef>
      <PropertyDef name="title">
        <Property name="label">考试主题</Property>
      </PropertyDef>
      <PropertyDef name="type">
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">1</Property>
                <Property name="value">正式考试</Property>
              </Entity>
              <Entity>
                <Property name="key">2</Property>
                <Property name="value">抢答</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
        <Property name="label">考试类型</Property>
      </PropertyDef>
    </DataType>
    <DataType name="groupType">
      <Property name="creationType">gov.hygs.htgl.entity.Grouptable</Property>
      <PropertyDef name="id">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="groupName">
        <Property></Property>
        <Property name="label">群组名称</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
      </PropertyDef>
      <Reference name="child">
        <Property name="dataType">[SELF]</Property>
        <Property name="dataProvider">qzBmCdglController#getCurrentGroupById</Property>
        <Property name="parameter">$${this.id}</Property>
      </Reference>
    </DataType>
    <DataType name="examType">
      <Property name="creationType">gov.hygs.htgl.entity.Exam</Property>
      <PropertyDef name="id">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="startTime">
        <Property name="dataType">Date</Property>
        <Property name="label">开始时间</Property>
      </PropertyDef>
      <PropertyDef name="endTime">
        <Property name="dataType">Date</Property>
        <Property name="label">结束时间</Property>
      </PropertyDef>
      <PropertyDef name="title">
        <Property></Property>
        <Property name="label">考试主题</Property>
      </PropertyDef>
      <PropertyDef name="examType">
        <Property></Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">1</Property>
                <Property name="value">正式考试</Property>
              </Entity>
              <Entity>
                <Property name="key">2</Property>
                <Property name="value">抢答</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
        <Property name="label">考试类型</Property>
      </PropertyDef>
      <PropertyDef name="fqrId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <Reference name="fqr">
        <Property name="dataType">[fqrType]</Property>
        <Property name="dataProvider">yxtkglController#getUserInfoByUserId</Property>
        <Property name="parameter">$${this.fqrId}</Property>
      </Reference>
      <Reference name="group">
        <Property name="dataType">groupType</Property>
        <Property name="parameter">$${this.id}</Property>
        <Property name="dataProvider">zstkglController#getGroupByExamId</Property>
      </Reference>
      <PropertyDef name="groupId"/>
    </DataType>
    <DataType name="fqrType">
      <Property name="creationType">gov.hygs.htgl.entity.User</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="user_Name">
        <Property></Property>
        <Property name="label">发起人</Property>
      </PropertyDef>
    </DataType>
    <DataType name="detialType">
      <Property name="creationType">gov.hygs.htgl.entity.Tktm</Property>
      <PropertyDef name="id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="flId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="tkfl">
        <Property name="label">所属分类</Property>
      </PropertyDef>
      <PropertyDef name="userId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="user">
        <Property name="label">录入人</Property>
      </PropertyDef>
      <PropertyDef name="createDate">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="spDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="sprId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="deptid">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="dept">
        <Property name="label">部门名称</Property>
      </PropertyDef>
      <PropertyDef name="content">
        <Property></Property>
        <Property name="label">提干内容</Property>
      </PropertyDef>
      <PropertyDef name="tmfz">
        <Property name="dataType">Double</Property>
        <Property name="label">题目分值</Property>
      </PropertyDef>
      <PropertyDef name="tmnd">
        <Property name="dataType">Integer</Property>
        <Property name="label">题目难度</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">0</Property>
                <Property name="value">基础型</Property>
              </Entity>
              <Entity>
                <Property name="key">1</Property>
                <Property name="value">进阶型</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="tmlyId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="tmly">
        <Property name="label">题目来源</Property>
      </PropertyDef>
      <PropertyDef name="mode">
        <Property></Property>
        <Property name="label">选择类型</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="value">判断题</Property>
                <Property name="key">0</Property>
              </Entity>
              <Entity>
                <Property name="value">单选题</Property>
                <Property name="key">1</Property>
              </Entity>
              <Entity>
                <Property name="value">多选题</Property>
                <Property name="key">2</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="yxbz">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="xybz">
        <Property></Property>
        <Property name="label">是否选中</Property>
        <Property name="mapping">
          <Property name="mapValues">
            <Collection>
              <Entity>
                <Property name="key">N</Property>
                <Property name="value">未选上</Property>
              </Entity>
              <Entity>
                <Property name="key">Y</Property>
                <Property name="value">已选上</Property>
              </Entity>
            </Collection>
          </Property>
        </Property>
      </PropertyDef>
    </DataType>
    <DataType name="tkflType">
      <Property name="creationType">gov.hygs.htgl.entity.Tkfl</Property>
      <PropertyDef name="id">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="parentId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="tkmc">
        <Property></Property>
        <Property name="label">分类名称</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
        <Property name="label">描述</Property>
      </PropertyDef>
      <Reference name="child">
        <Property name="dataType">[SELF]</Property>
        <Property name="parameter">$${this.id}</Property>
        <Property name="dataProvider">tkcspzController#getCurrentTkflById</Property>
      </Reference>
      <Reference name="oChild">
        <Property name="dataProvider">tkcspzController#getCurrentTkflById</Property>
        <Property name="parameter">$${this.id}</Property>
        <Property name="dataType">[SELF]</Property>
      </Reference>
    </DataType>
  </Model>
  <View>
    <Container id="datasets">
      <DataSet id="dsTktm">
        <Property name="dataType">[tktmType]</Property>
        <Property name="dataProvider">zstkglController#getZstkInfo</Property>
        <Property name="pageSize">20</Property>
      </DataSet>
      <DataSet id="dsTktmShow">
        <Property name="dataProvider">zstkglController#getZstkInfoByKsts</Property>
        <Property name="dataType">[tktmType]</Property>
        <Property name="pageSize">10</Property>
        <Property name="loadMode">manual</Property>
      </DataSet>
      <DataSet id="dsCondition">
        <Property name="dataType">[conditonType]</Property>
      </DataSet>
      <DataSet id="dsTktmFilter">
        <Property name="dataType">[tktmType]</Property>
        <Property name="dataProvider">zstkglController#getRandomTktmFilter</Property>
        <Property name="pageSize">200</Property>
        <Property name="loadMode">manual</Property>
      </DataSet>
      <DataSet id="dsGroupt">
        <Property name="dataProvider">qzBmCdglController#getGrouptableInfo</Property>
        <Property name="dataType">[groupType]</Property>
      </DataSet>
      <DataSet id="dsKstsValue">
        <Property name="dataProvider">zstkglController#getSomeInfoBySystemPropsKey</Property>
        <Property name="parameter">ksts</Property>
      </DataSet>
      <DataSet id="dsKstsqdValue">
        <Property name="dataProvider">zstkglController#getSomeInfoBySystemPropsKey</Property>
        <Property name="parameter">kstsqd</Property>
      </DataSet>
      <DataSet id="dsChose">
        <Property name="dataType">[tktmType]</Property>
        <Property name="pageSize">2</Property>
      </DataSet>
      <DataSet id="dsExam">
        <Property name="dataType">[examType]</Property>
        <Property name="pageSize">20</Property>
        <Property name="dataProvider">zstkglController#getExamInfo</Property>
      </DataSet>
      <DataSet id="dsDetail">
        <Property name="dataType">[detialType]</Property>
        <Property name="pageSize">10</Property>
        <Property name="dataProvider">zstkglController#getExamDetailInfo</Property>
        <Property name="loadMode">manual</Property>
      </DataSet>
      <DataSet id="dsTkfl">
        <Property name="dataType">[tkflType]</Property>
        <Property name="dataProvider">tkcspzController#getTkflRoot</Property>
        <Property name="loadMode">lazy</Property>
      </DataSet>
    </Container>
    <Container id="dialogs">
      <Dialog id="conditionDialog">
        <Property name="width">650</Property>
        <Property name="height">350</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">推送信息</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">var condition = view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;);&#xD;
var beginTime = condition.get(&quot;begin&quot;);&#xD;
var endTime = condition.get(&quot;end&quot;);&#xD;
var dsTkfl = view.get(&quot;#dsTkfl&quot;);&#xD;
var dsTktmShow = view.get(&quot;#dsTktmShow&quot;);&#xD;
var type = condition.get(&quot;type&quot;);&#xD;
if(type == 2){//抢答&#xD;
	view.get(&quot;#dsTktmFilter&quot;).set(&quot;parameter&quot;,{&quot;table&quot;:&quot;kstsqd&quot;});&#xD;
}&#xD;
view.get(&quot;#dsTktmFilter&quot;).flushAsync();&#xD;
var flid = dsTkfl.getData(&quot;#&quot;).get(&quot;id&quot;)&#xD;
&#xD;
dsTktmShow.set(&quot;parameter&quot;,{&#xD;
	flid: flid&#xD;
})&#xD;
dsTktmShow.flushAsync();&#xD;
if(endTime &lt; beginTime &amp;&amp; endTime != null){&#xD;
	throw new dorado.Exception(&quot;起始日期不能小于终止日期！&quot;);&#xD;
	return;&#xD;
}&#xD;
if(condition.get(&quot;type&quot;) == undefined){&#xD;
	throw new dorado.Exception(&quot;请选择考试类型！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
&#xD;
view.get(&quot;#optDialog&quot;).show();&#xD;
</ClientEvent>
                <Property name="caption">选择推送</Property>
                <Property name="icon">url(>skin>common/icons.gif) -80px -60px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">var condition = view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;);&#xD;
var beginTime = condition.get(&quot;begin&quot;);&#xD;
var endTime = condition.get(&quot;end&quot;);&#xD;
var type = condition.get(&quot;type&quot;);&#xD;
if(endTime &lt; beginTime &amp;&amp; endTime != null){&#xD;
	throw new dorado.Exception(&quot;起始日期不能小于终止日期！&quot;);&#xD;
	return;&#xD;
}&#xD;
if(type == undefined){&#xD;
	throw new dorado.Exception(&quot;请选择考试类型！&quot;);&#xD;
	return;&#xD;
}&#xD;
view.get(&quot;#sjtsflDialog&quot;).show();&#xD;
</ClientEvent>
                <Property name="caption">随机推送</Property>
                <Property name="icon">url(>skin>common/icons.gif) -100px -60px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#conditionDialog&quot;).hide();&#xD;
view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;).cancel();&#xD;
view.get(&quot;#grouptree&quot;).unselectAll();</ClientEvent>
                <Property name="caption">取消</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <AutoForm id="conditonForm">
                <Property name="dataSet">dsCondition</Property>
                <AutoFormElement>
                  <Property name="name">begin</Property>
                  <Property name="property">begin</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">end</Property>
                  <Property name="property">end</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">groupname</Property>
                  <Property name="property">groupname</Property>
                  <Property name="trigger">groupDropDown</Property>
                  <Property name="editable">false</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">type</Property>
                  <Property name="property">type</Property>
                  <Property name="editable">false</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement layoutConstraint="colSpan:2">
                  <Property name="name">title</Property>
                  <Property name="property">title</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement layoutConstraint="colSpan:2">
                  <Property name="name">ms</Property>
                  <Property name="property">ms</Property>
                  <Editor>
                    <TextArea/>
                  </Editor>
                </AutoFormElement>
              </AutoForm>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="tktmDialog">
        <Property name="height">500</Property>
        <Property name="width">700</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">推送题目</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">var condition = view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;);&#xD;
var id = [];&#xD;
var i = 0;&#xD;
view.get(&quot;#dsTktmFilter&quot;).getData().each(function(entity){&#xD;
	i++;&#xD;
	id.push(entity.get(&quot;id&quot;));&#xD;
});&#xD;
if(condition.get(&quot;type&quot;) == 1){&#xD;
	value = view.get(&quot;#dsKstsValue&quot;).getData(); &#xD;
}else if(condition.get(&quot;type&quot;) == 2){&#xD;
	value = view.get(&quot;#dsKstsqdValue&quot;).getData();&#xD;
}&#xD;
if(i&lt;value){&#xD;
	throw new dorado.Exception(&quot;选择题目数不足&quot;+value+&quot;题！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
if(condition.get(&quot;groupname&quot;) == &quot;&quot; || condition.get(&quot;groupname&quot;) == undefined){&#xD;
	condition.set({groupId:null});&#xD;
	condition.set({groupname:null});&#xD;
}&#xD;
view.get(&quot;#tsAction&quot;).set(&quot;parameter&quot;,{&#xD;
	&quot;id&quot;:id,&#xD;
	&quot;begin&quot;:condition.get(&quot;begin&quot;),&#xD;
	&quot;end&quot;:condition.get(&quot;end&quot;),&#xD;
	&quot;tsrq&quot;:condition.get(&quot;tsrq&quot;),&#xD;
	&quot;ms&quot;:condition.get(&quot;ms&quot;),&#xD;
	&quot;groupId&quot;:condition.get(&quot;groupId&quot;),&#xD;
	&quot;groupname&quot;:condition.get(&quot;groupname&quot;),&#xD;
	&quot;title&quot;:condition.get(&quot;title&quot;),&#xD;
	&quot;type&quot;:condition.get(&quot;type&quot;)&#xD;
});&#xD;
&#xD;
&#xD;
view.get(&quot;#tsAction&quot;).execute(function(){&#xD;
	view.get(&quot;#conditionDialog&quot;).close();&#xD;
	view.get(&quot;#tktmDialog&quot;).close();&#xD;
	view.get(&quot;#grouptree&quot;).unselectAll();&#xD;
	view.get(&quot;#dsTktmFilter&quot;).flushAsync();&#xD;
	view.get(&quot;#sjtsflDialog&quot;).hide();&#xD;
	view.get(&quot;#dsExam&quot;).flushAsync();&#xD;
});&#xD;
</ClientEvent>
                <Property name="caption">提交</Property>
                <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#tktmDialog&quot;).close();&#xD;
&#xD;
</ClientEvent>
                <Property name="caption">取消</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <ToolBar>
                <DataPilot>
                  <Property name="dataSet">dsTktmFilter</Property>
                  <Property name="itemCodes">pages</Property>
                </DataPilot>
              </ToolBar>
              <DataGrid>
                <Property name="dataSet">dsTktmFilter</Property>
                <Property name="readOnly">true</Property>
                <RowNumColumn/>
                <DataColumn name="tkfl">
                  <Property name="property">tkfl</Property>
                </DataColumn>
                <DataColumn name="createDate">
                  <Property name="property">createDate</Property>
                </DataColumn>
                <DataColumn name="content">
                  <Property name="property">content</Property>
                </DataColumn>
                <DataColumn name="tmfz">
                  <Property name="property">tmfz</Property>
                </DataColumn>
                <DataColumn name="tmnd">
                  <Property name="property">tmnd</Property>
                </DataColumn>
                <DataColumn name="tmly">
                  <Property name="property">tmly</Property>
                </DataColumn>
                <DataColumn name="mode">
                  <Property name="property">mode</Property>
                </DataColumn>
                <DataColumn name="user">
                  <Property name="property">user</Property>
                </DataColumn>
                <DataColumn name="dept">
                  <Property name="property">dept</Property>
                </DataColumn>
              </DataGrid>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="optDialog">
        <Property name="width">90%</Property>
        <Property name="height">600</Property>
        <Buttons>
          <Button>
            <ClientEvent name="onClick">var condition = view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;);&#xD;
//var entitys = view.get('#optGrid.selection');&#xD;
var entitys = view.get(&quot;#dsChose&quot;).getData();&#xD;
var ids = [];&#xD;
var i = 0;&#xD;
entitys.each(function(entity){&#xD;
	ids.push(entity.get(&quot;id&quot;));&#xD;
	i++;&#xD;
});&#xD;
var value;&#xD;
if(condition.get(&quot;type&quot;) == 1){&#xD;
	value = view.get(&quot;#dsKstsValue&quot;).getData(); &#xD;
}else if(condition.get(&quot;type&quot;) == 2){&#xD;
	value = view.get(&quot;#dsKstsqdValue&quot;).getData();&#xD;
}&#xD;
 &#xD;
 &#xD;
if(i&lt;value){&#xD;
	throw new dorado.Exception(&quot;选择题目数不足&quot;+value+&quot;题！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
if(i>value){&#xD;
	throw new dorado.Exception(&quot;选择题目数已超&quot;+value+&quot;题！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
if(condition.get(&quot;groupname&quot;) == &quot;&quot; || condition.get(&quot;groupname&quot;) == undefined){&#xD;
	condition.set({groupId:null});&#xD;
	condition.set({groupname:null});&#xD;
}&#xD;
&#xD;
view.get(&quot;#tsAction&quot;).set(&quot;parameter&quot;,{&#xD;
	&quot;id&quot;:ids,&#xD;
	&quot;tsrq&quot;:condition.get(&quot;tsrq&quot;),&#xD;
	&quot;begin&quot;:condition.get(&quot;begin&quot;),&#xD;
	&quot;end&quot;:condition.get(&quot;end&quot;),&#xD;
	&quot;ms&quot;:condition.get(&quot;ms&quot;),&#xD;
	&quot;groupId&quot;:condition.get(&quot;groupId&quot;),&#xD;
	&quot;groupname&quot;:condition.get(&quot;groupname&quot;),&#xD;
	&quot;title&quot;:condition.get(&quot;title&quot;),&#xD;
	&quot;type&quot;:condition.get(&quot;type&quot;)&#xD;
});&#xD;
&#xD;
&#xD;
view.get(&quot;#tsAction&quot;).execute(function(){&#xD;
	view.get(&quot;#conditionDialog&quot;).close();&#xD;
	view.get(&quot;#optDialog&quot;).close();&#xD;
	entitys.clear();&#xD;
	view.get(&quot;#grouptree&quot;).unselectAll();&#xD;
	view.get(&quot;#dsTktmShow&quot;).flushAsync();&#xD;
	view.get(&quot;#dsExam&quot;).flushAsync();&#xD;
&#xD;
});&#xD;
</ClientEvent>
            <Property name="caption">提交</Property>
            <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
          </Button>
          <Button>
            <ClientEvent name="onClick">//view.get(&quot;#optGrid&quot;).unselectAll();&#xD;
view.get(&quot;#dsTktmShow&quot;).flushAsync();&#xD;
view.get(&quot;#optDialog&quot;).close();&#xD;
var entitys = view.get(&quot;#dsChose&quot;).getData();&#xD;
if(entitys != undefined){&#xD;
	entitys.clear();&#xD;
}&#xD;
</ClientEvent>
            <Property name="caption">取消</Property>
            <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
          </Button>
        </Buttons>
        <Children>
          <Container>
            <SplitPanel>
              <Property name="position">48%</Property>
              <MainControl>
                <SplitPanel>
                  <Property name="position">10%</Property>
                  <MainControl>
                    <Container>
                      <GroupBox>
                        <Property name="caption">选中推送题目</Property>
                        <Buttons/>
                        <Children>
                          <ToolBar/>
                          <DataGrid id="choseGrid">
                            <Property name="dataSet">dsChose</Property>
                            <Property name="readOnly">true</Property>
                            <Property name="selectionMode">multiRows</Property>
                            <RowSelectorColumn/>
                            <RowNumColumn/>
                            <DataColumn name="tkfl">
                              <Property name="property">tkfl</Property>
                            </DataColumn>
                            <DataColumn name="createDate">
                              <Property name="property">createDate</Property>
                            </DataColumn>
                            <DataColumn name="content">
                              <Property name="property">content</Property>
                            </DataColumn>
                            <DataColumn name="tmfz">
                              <Property name="property">tmfz</Property>
                            </DataColumn>
                            <DataColumn name="tmnd">
                              <Property name="property">tmnd</Property>
                            </DataColumn>
                            <DataColumn name="tmly">
                              <Property name="property">tmly</Property>
                            </DataColumn>
                            <DataColumn name="mode">
                              <Property name="property">mode</Property>
                            </DataColumn>
                            <DataColumn name="user">
                              <Property name="property">user</Property>
                            </DataColumn>
                            <DataColumn name="dept">
                              <Property name="property">dept</Property>
                            </DataColumn>
                          </DataGrid>
                        </Children>
                      </GroupBox>
                    </Container>
                  </MainControl>
                  <SideControl>
                    <Container layout="hbox align:center">
                      <Property name="height">500</Property>
                      <Container layout="vbox align:center">
                        <Property name="height">65</Property>
                        <Property name="width">59</Property>
                        <Button>
                          <ClientEvent name="onClick">/*&#xD;
var selects = [];&#xD;
if(arg.added != null &amp;&amp; arg.removed == null){&#xD;
	arg.added.each(function(entity){&#xD;
		var i = 0;&#xD;
		if(view.get(&quot;#dsChose&quot;).getData(&quot;#&quot;) != undefined){&#xD;
			view.get(&quot;#dsChose&quot;).getData().each(function(c){&#xD;
				if(entity.get(&quot;id&quot;) == c.get(&quot;id&quot;)){&#xD;
					i++;&#xD;
				}&#xD;
			})&#xD;
		}&#xD;
		if(i == 0){&#xD;
			view.get(&quot;#dsChose&quot;).insert({&#xD;
				id:entity.get(&quot;id&quot;),&#xD;
				tkfl:entity.get(&quot;tkfl&quot;),&#xD;
				createDate:entity.get(&quot;createDate&quot;),&#xD;
				content:entity.get(&quot;content&quot;),&#xD;
				tmfz:entity.get(&quot;tmfz&quot;),&#xD;
				tmnd:entity.get(&quot;tmnd&quot;),&#xD;
				tmly:entity.get(&quot;tmly&quot;),&#xD;
				mode:entity.get(&quot;mode&quot;),&#xD;
				user:entity.get(&quot;user&quot;),&#xD;
				dept:entity.get(&quot;dept&quot;)&#xD;
			});&#xD;
		}&#xD;
	});&#xD;
}&#xD;
&#xD;
if(arg.removed != null &amp;&amp; arg.added == null){&#xD;
	arg.removed.each(function(entity){&#xD;
		view.get(&quot;#dsChose&quot;).getData().each(function(choseEntity){&#xD;
			if(choseEntity.get(&quot;id&quot;) == entity.get(&quot;id&quot;)){&#xD;
				choseEntity.remove();&#xD;
			}&#xD;
		});&#xD;
	});&#xD;
	&#xD;
}&#xD;
*/&#xD;
//var entity = view.get('#optGrid.selection');&#xD;
var entitys = view.get('#optGrid.selection');&#xD;
if(entitys != &quot;&quot; || entitys != undefined){&#xD;
	entitys.each(function(entity){&#xD;
		var i = 0;&#xD;
		if(view.get(&quot;#dsChose&quot;).getData(&quot;#&quot;) != undefined){&#xD;
			view.get(&quot;#dsChose&quot;).getData().each(function(c){&#xD;
				if(entity.get(&quot;id&quot;) == c.get(&quot;id&quot;)){&#xD;
					i++;&#xD;
				}&#xD;
			})&#xD;
		}&#xD;
		if(i == 0){&#xD;
			view.get(&quot;#dsChose&quot;).insert({&#xD;
				id:entity.get(&quot;id&quot;),&#xD;
				tkfl:entity.get(&quot;tkfl&quot;),&#xD;
				createDate:entity.get(&quot;createDate&quot;),&#xD;
				content:entity.get(&quot;content&quot;),&#xD;
				tmfz:entity.get(&quot;tmfz&quot;),&#xD;
				tmnd:entity.get(&quot;tmnd&quot;),&#xD;
				tmly:entity.get(&quot;tmly&quot;),&#xD;
				mode:entity.get(&quot;mode&quot;),&#xD;
				user:entity.get(&quot;user&quot;),&#xD;
				dept:entity.get(&quot;dept&quot;)&#xD;
			});&#xD;
		}&#xD;
	});&#xD;
	view.get('#optGrid').unselectAll();&#xD;
}&#xD;
</ClientEvent>
                          <Property name="icon">url(>skin>common/icons.gif) -20px -300px</Property>
                        </Button>
                        <Button>
                          <ClientEvent name="onClick">var entitys = view.get('#choseGrid.selection');&#xD;
if(entitys != &quot;&quot; || entitys != undefined){&#xD;
	entitys.each(function(entity){&#xD;
		entity.remove();&#xD;
	});&#xD;
}</ClientEvent>
                          <Property name="icon">url(>skin>common/icons.gif) -40px -300px</Property>
                        </Button>
                      </Container>
                    </Container>
                  </SideControl>
                </SplitPanel>
              </MainControl>
              <SideControl>
                <GroupBox>
                  <Property name="caption">推送题目</Property>
                  <Buttons/>
                  <Children>
                    <SplitPanel>
                      <Property name="position">30%</Property>
                      <MainControl>
                        <Container>
                          <ToolBar>
                            <DataPilot>
                              <Property name="dataSet">dsTktmShow</Property>
                              <Property name="itemCodes">pages</Property>
                            </DataPilot>
                          </ToolBar>
                          <DataGrid id="optGrid">
                            <Property name="dataSet">dsTktmShow</Property>
                            <Property name="readOnly">true</Property>
                            <Property name="selectionMode">multiRows</Property>
                            <RowSelectorColumn/>
                            <RowNumColumn/>
                            <DataColumn name="tkfl">
                              <Property name="property">tkfl</Property>
                            </DataColumn>
                            <DataColumn name="createDate">
                              <Property name="property">createDate</Property>
                            </DataColumn>
                            <DataColumn name="content">
                              <Property name="property">content</Property>
                            </DataColumn>
                            <DataColumn name="tmfz">
                              <Property name="property">tmfz</Property>
                            </DataColumn>
                            <DataColumn name="tmnd">
                              <Property name="property">tmnd</Property>
                            </DataColumn>
                            <DataColumn name="tmly">
                              <Property name="property">tmly</Property>
                            </DataColumn>
                            <DataColumn name="mode">
                              <Property name="property">mode</Property>
                            </DataColumn>
                            <DataColumn name="user">
                              <Property name="property">user</Property>
                            </DataColumn>
                            <DataColumn name="dept">
                              <Property name="property">dept</Property>
                            </DataColumn>
                          </DataGrid>
                        </Container>
                      </MainControl>
                      <SideControl>
                        <DataTreeGrid id="tkfltree">
                          <ClientEvent name="onClick">var dsTktmShow = view.get(&quot;#dsTktmShow&quot;);&#xD;
var flid = view.get(&quot;#dsTkfl&quot;).getData(&quot;!current_Node&quot;).get(&quot;id&quot;)&#xD;
dsTktmShow.set(&quot;parameter&quot;,{&#xD;
	flid: flid&#xD;
})&#xD;
dsTktmShow.flushAsync();</ClientEvent>
                          <Property name="currentNodeDataPath">current_Node</Property>
                          <Property name="dataSet">dsTkfl</Property>
                          <Property name="dataType">tkflType</Property>
                          <Property name="treeColumn">tkmc</Property>
                          <Property name="readOnly">true</Property>
                          <BindingConfigs>
                            <BindingConfig>
                              <Property name="recursive">true</Property>
                              <Property name="childrenProperty">child</Property>
                              <Property name="icon">url(>skin>common/icons.gif) -160px -80px</Property>
                              <Property name="expandLevel">2</Property>
                            </BindingConfig>
                          </BindingConfigs>
                          <Columns>
                            <DataColumn>
                              <Property name="name">tkmc</Property>
                              <Property name="property">tkmc</Property>
                              <Editor/>
                            </DataColumn>
                          </Columns>
                        </DataTreeGrid>
                      </SideControl>
                    </SplitPanel>
                  </Children>
                </GroupBox>
              </SideControl>
            </SplitPanel>
          </Container>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="ytsDialog">
        <Property name="height">500</Property>
        <Property name="width">700</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">已推送题目</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#ytsDialog&quot;).close();</ClientEvent>
                <Property name="caption">关闭</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <ToolBar>
                <DataPilot>
                  <Property name="dataSet">dsDetail</Property>
                  <Property name="itemCodes">pages</Property>
                </DataPilot>
              </ToolBar>
              <DataGrid>
                <Property name="dataSet">dsDetail</Property>
                <Property name="readOnly">true</Property>
                <RowNumColumn/>
                <DataColumn name="tkfl">
                  <Property name="property">tkfl</Property>
                </DataColumn>
                <DataColumn name="createDate">
                  <Property name="property">createDate</Property>
                </DataColumn>
                <DataColumn name="content">
                  <Property name="property">content</Property>
                </DataColumn>
                <DataColumn name="tmfz">
                  <Property name="property">tmfz</Property>
                </DataColumn>
                <DataColumn name="tmnd">
                  <Property name="property">tmnd</Property>
                </DataColumn>
                <DataColumn name="tmly">
                  <Property name="property">tmly</Property>
                </DataColumn>
                <DataColumn name="mode">
                  <Property name="property">mode</Property>
                </DataColumn>
                <DataColumn name="user">
                  <Property name="property">user</Property>
                </DataColumn>
                <DataColumn name="dept">
                  <Property name="property">dept</Property>
                </DataColumn>
              </DataGrid>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="sjtsflDialog">
        <Property name="height">350</Property>
        <Property name="width">600</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">推送信息</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">var condition = view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;);&#xD;
var entity = view.get('#sjtsDataGrid.selection');&#xD;
var flid = &quot;&quot;;&#xD;
if(entity.length>=1){&#xD;
	entity.each(function(o){&#xD;
		flid+= o.get(&quot;data&quot;).get(&quot;id&quot;)+&quot;,&quot;;&#xD;
	})&#xD;
	var type = condition.get(&quot;type&quot;);&#xD;
	if(type == 2){//抢答&#xD;
		view.get(&quot;#dsTktmFilter&quot;).set(&quot;parameter&quot;,{&quot;table&quot;:&quot;kstsqd&quot;,&#xD;
		flids:flid});&#xD;
	}else{&#xD;
		view.get(&quot;#dsTktmFilter&quot;).set(&quot;parameter&quot;,{flids:flid});&#xD;
	}&#xD;
	view.get(&quot;#dsTktmFilter&quot;).flush();&#xD;
view.get(&quot;#tktmDialog&quot;).show();&#xD;
}else{&#xD;
		dorado.MessageBox.alert(&quot;请选择分类！&quot;);&#xD;
	}&#xD;
&#xD;
&#xD;
&#xD;
</ClientEvent>
                <Property name="caption">抽取题目</Property>
                <Property name="icon">url(>skin>common/icons.gif) -100px -60px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#sjtsflDialog&quot;).hide();&#xD;
</ClientEvent>
                <Property name="caption">取消</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <DataTreeGrid id="sjtsDataGrid">
                <Property name="currentNodeDataPath">current_Node</Property>
                <Property name="dataSet">dsTkfl</Property>
                <Property name="dataType">tkflType</Property>
                <Property name="treeColumn">tkmc</Property>
                <Property name="readOnly">true</Property>
                <Property name="selectionMode">multiRows</Property>
                <BindingConfigs>
                  <BindingConfig>
                    <Property name="recursive">true</Property>
                    <Property name="childrenProperty">child</Property>
                    <Property name="icon">url(>skin>common/icons.gif) -160px -80px</Property>
                    <Property name="expandLevel">2</Property>
                  </BindingConfig>
                </BindingConfigs>
                <Columns>
                  <RowSelectorColumn/>
                  <DataColumn>
                    <Property name="name">tkmc</Property>
                    <Property name="property">tkmc</Property>
                    <Editor/>
                  </DataColumn>
                  <DataColumn>
                    <Property name="name">ms</Property>
                    <Property name="property">ms</Property>
                    <Editor/>
                  </DataColumn>
                </Columns>
              </DataTreeGrid>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="updateDialog">
        <Property name="height">350</Property>
        <Property name="width">650</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">修改推送信息</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">var condition = view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;);&#xD;
var beginTime = condition.get(&quot;startTime&quot;);&#xD;
var endTime = condition.get(&quot;endTime&quot;);&#xD;
var dsTkfl = view.get(&quot;#dsTkfl&quot;);&#xD;
var dsTktmShow = view.get(&quot;#dsTktmShow&quot;);&#xD;
var type = condition.get(&quot;examType&quot;);&#xD;
if(type == 2){//抢答&#xD;
	view.get(&quot;#dsTktmFilter&quot;).set(&quot;parameter&quot;,{&quot;table&quot;:&quot;kstsqd&quot;});&#xD;
}&#xD;
view.get(&quot;#dsTktmFilter&quot;).flushAsync();&#xD;
var flid = dsTkfl.getData(&quot;#&quot;).get(&quot;id&quot;)&#xD;
&#xD;
dsTktmShow.set(&quot;parameter&quot;,{&#xD;
	flid: flid&#xD;
})&#xD;
dsTktmShow.flushAsync();&#xD;
if(endTime &lt; beginTime &amp;&amp; endTime != null){&#xD;
	throw new dorado.Exception(&quot;起始日期不能小于终止日期！&quot;);&#xD;
	return;&#xD;
}&#xD;
if(condition.get(&quot;examType&quot;) == undefined){&#xD;
	throw new dorado.Exception(&quot;请选择考试类型！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
var data = view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;);&#xD;
if(data != undefined){&#xD;
	view.get(&quot;#dsDetail&quot;).set(&quot;parameter&quot;,{&quot;id&quot;:data.get(&quot;id&quot;)});&#xD;
	view.get(&quot;#updateDetailDialog&quot;).show();&#xD;
	view.get(&quot;#dsDetail&quot;).flushAsync();&#xD;
}&#xD;
&#xD;
</ClientEvent>
                <Property name="caption">修改推送题目</Property>
                <Property name="icon">url(>skin>common/icons.gif) -200px -0px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#updateDialog&quot;).close();&#xD;
view.get(&quot;#grouptree2&quot;).unselectAll();&#xD;
view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;).cancel();&#xD;
view.get(&quot;#dsExam&quot;).getData(&quot;#.group&quot;).cancel();&#xD;
</ClientEvent>
                <Property name="caption">取消</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <AutoForm>
                <Property name="dataSet">dsExam</Property>
                <AutoFormElement>
                  <Property name="name">startTime</Property>
                  <Property name="property">startTime</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">endTime</Property>
                  <Property name="property">endTime</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">title</Property>
                  <Property name="property">title</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">examType</Property>
                  <Property name="property">examType</Property>
                  <Property name="editable">false</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement layoutConstraint="colSpan:2">
                  <Property name="name">groupName</Property>
                  <Property name="property">groupName</Property>
                  <Property name="dataPath">#.group</Property>
                  <Property name="trigger">groupDropDown2</Property>
                  <Property name="editable">false</Property>
                  <Editor/>
                </AutoFormElement>
              </AutoForm>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="updateDetailDialog">
        <Property name="height">600</Property>
        <Property name="width">90%</Property>
        <Buttons>
          <Button>
            <ClientEvent name="onClick">//dsExam&#xD;
//dsDetail&#xD;
var condition = view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;);&#xD;
//var entitys = view.get('#optGrid.selection');&#xD;
var entitys = view.get(&quot;#dsDetail&quot;).getData();&#xD;
var ids = [];&#xD;
var i = 0;&#xD;
entitys.each(function(entity){&#xD;
	ids.push(entity.get(&quot;id&quot;));&#xD;
	i++;&#xD;
});&#xD;
var value;&#xD;
if(condition.get(&quot;examType&quot;) == 1){&#xD;
	value = view.get(&quot;#dsKstsValue&quot;).getData(); &#xD;
}else if(condition.get(&quot;examType&quot;) == 2){&#xD;
	value = view.get(&quot;#dsKstsqdValue&quot;).getData();&#xD;
}&#xD;
 &#xD;
 &#xD;
if(i&lt;value){&#xD;
	throw new dorado.Exception(&quot;选择题目数不足&quot;+value+&quot;题！&quot;);&#xD;
	return;&#xD;
}&#xD;
&#xD;
if(i>value){&#xD;
	throw new dorado.Exception(&quot;选择题目数已超&quot;+value+&quot;题！&quot;);&#xD;
	return;&#xD;
}&#xD;
/*&#xD;
if(condition.get(&quot;groupname&quot;) == &quot;&quot; || condition.get(&quot;groupname&quot;) == undefined){&#xD;
	condition.set({groupId:null});&#xD;
	condition.set({groupname:null});&#xD;
}&#xD;
*/&#xD;
if(condition.get(&quot;group&quot;).get(&quot;groupName&quot;) == &quot;&quot; || condition.get(&quot;group&quot;).get(&quot;groupName&quot;) == undefined){&#xD;
	condition.set({groupId:null});&#xD;
	//condition.set({groupname:null});&#xD;
}&#xD;
view.get(&quot;#updateAction&quot;).set(&quot;parameter&quot;,{&#xD;
	&quot;id&quot;:ids,&#xD;
	&quot;examid&quot;:condition.get(&quot;id&quot;),&#xD;
	&quot;fqrid&quot;:condition.get(&quot;fqrId&quot;),&#xD;
	//&quot;tsrq&quot;:condition.get(&quot;tsrq&quot;),&#xD;
	&quot;begin&quot;:condition.get(&quot;startTime&quot;),&#xD;
	&quot;end&quot;:condition.get(&quot;endTime&quot;),&#xD;
	//&quot;ms&quot;:condition.get(&quot;ms&quot;),&#xD;
	&quot;groupId&quot;:condition.get(&quot;groupId&quot;),&#xD;
	//&quot;groupname&quot;:condition.get(&quot;groupname&quot;),&#xD;
	&quot;title&quot;:condition.get(&quot;title&quot;),&#xD;
	&quot;type&quot;:condition.get(&quot;examType&quot;)&#xD;
});&#xD;
&#xD;
&#xD;
view.get(&quot;#updateAction&quot;).execute(function(){&#xD;
	view.get(&quot;#updateDialog&quot;).close();&#xD;
	view.get(&quot;#updateDetailDialog&quot;).close();&#xD;
	entitys.clear();&#xD;
	view.get(&quot;#grouptree2&quot;).unselectAll();&#xD;
	view.get(&quot;#dsTktmShow&quot;).flushAsync();&#xD;
	view.get(&quot;#dsExam&quot;).flushAsync();&#xD;
&#xD;
});&#xD;
</ClientEvent>
            <Property name="caption">提交</Property>
            <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
          </Button>
          <Button>
            <ClientEvent name="onClick">//view.get(&quot;#optGrid&quot;).unselectAll();&#xD;
view.get(&quot;#dsTktmShow&quot;).flushAsync();&#xD;
view.get(&quot;#updateDetailDialog&quot;).close();&#xD;
var entitys = view.get(&quot;#dsDetail&quot;).getData();&#xD;
if(entitys != undefined){&#xD;
	entitys.clear();&#xD;
}&#xD;
</ClientEvent>
            <Property name="caption">取消</Property>
            <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
          </Button>
        </Buttons>
        <Children>
          <SplitPanel>
            <Property name="position">48%</Property>
            <MainControl>
              <SplitPanel>
                <Property name="position">10%</Property>
                <MainControl>
                  <Container>
                    <GroupBox>
                      <Property name="caption">选中推送题目</Property>
                      <Buttons/>
                      <Children>
                        <ToolBar/>
                        <DataGrid id="chosedGrid">
                          <Property name="readOnly">true</Property>
                          <Property name="selectionMode">multiRows</Property>
                          <Property name="dataSet">dsDetail</Property>
                          <RowSelectorColumn/>
                          <RowNumColumn/>
                          <DataColumn name="tkfl">
                            <Property name="property">tkfl</Property>
                          </DataColumn>
                          <DataColumn name="createDate">
                            <Property name="property">createDate</Property>
                          </DataColumn>
                          <DataColumn name="content">
                            <Property name="property">content</Property>
                          </DataColumn>
                          <DataColumn name="tmfz">
                            <Property name="property">tmfz</Property>
                          </DataColumn>
                          <DataColumn name="tmnd">
                            <Property name="property">tmnd</Property>
                          </DataColumn>
                          <DataColumn name="tmly">
                            <Property name="property">tmly</Property>
                          </DataColumn>
                          <DataColumn name="mode">
                            <Property name="property">mode</Property>
                          </DataColumn>
                          <DataColumn name="user">
                            <Property name="property">user</Property>
                          </DataColumn>
                          <DataColumn name="dept">
                            <Property name="property">dept</Property>
                          </DataColumn>
                        </DataGrid>
                      </Children>
                    </GroupBox>
                  </Container>
                </MainControl>
                <SideControl>
                  <Container layout="hbox align:center">
                    <Property name="height">500</Property>
                    <Container layout="vbox align:center">
                      <Property name="height">65</Property>
                      <Property name="width">59</Property>
                      <Button>
                        <ClientEvent name="onClick">/*&#xD;
var selects = [];&#xD;
if(arg.added != null &amp;&amp; arg.removed == null){&#xD;
	arg.added.each(function(entity){&#xD;
		var i = 0;&#xD;
		if(view.get(&quot;#dsChose&quot;).getData(&quot;#&quot;) != undefined){&#xD;
			view.get(&quot;#dsChose&quot;).getData().each(function(c){&#xD;
				if(entity.get(&quot;id&quot;) == c.get(&quot;id&quot;)){&#xD;
					i++;&#xD;
				}&#xD;
			})&#xD;
		}&#xD;
		if(i == 0){&#xD;
			view.get(&quot;#dsChose&quot;).insert({&#xD;
				id:entity.get(&quot;id&quot;),&#xD;
				tkfl:entity.get(&quot;tkfl&quot;),&#xD;
				createDate:entity.get(&quot;createDate&quot;),&#xD;
				content:entity.get(&quot;content&quot;),&#xD;
				tmfz:entity.get(&quot;tmfz&quot;),&#xD;
				tmnd:entity.get(&quot;tmnd&quot;),&#xD;
				tmly:entity.get(&quot;tmly&quot;),&#xD;
				mode:entity.get(&quot;mode&quot;),&#xD;
				user:entity.get(&quot;user&quot;),&#xD;
				dept:entity.get(&quot;dept&quot;)&#xD;
			});&#xD;
		}&#xD;
	});&#xD;
}&#xD;
&#xD;
if(arg.removed != null &amp;&amp; arg.added == null){&#xD;
	arg.removed.each(function(entity){&#xD;
		view.get(&quot;#dsChose&quot;).getData().each(function(choseEntity){&#xD;
			if(choseEntity.get(&quot;id&quot;) == entity.get(&quot;id&quot;)){&#xD;
				choseEntity.remove();&#xD;
			}&#xD;
		});&#xD;
	});&#xD;
	&#xD;
}&#xD;
*/&#xD;
//var entity = view.get('#optGrid.selection');&#xD;
var entitys = view.get('#optsGrid.selection');&#xD;
if(entitys != &quot;&quot; || entitys != undefined){&#xD;
	entitys.each(function(entity){&#xD;
		var i = 0;&#xD;
		if(view.get(&quot;#dsDetail&quot;).getData(&quot;#&quot;) != undefined){&#xD;
			view.get(&quot;#dsDetail&quot;).getData().each(function(c){&#xD;
				if(entity.get(&quot;id&quot;) == c.get(&quot;id&quot;)){&#xD;
					i++;&#xD;
				}&#xD;
			})&#xD;
		}&#xD;
		if(i == 0){&#xD;
			view.get(&quot;#dsDetail&quot;).insert({&#xD;
				id:entity.get(&quot;id&quot;),&#xD;
				tkfl:entity.get(&quot;tkfl&quot;),&#xD;
				createDate:entity.get(&quot;createDate&quot;),&#xD;
				content:entity.get(&quot;content&quot;),&#xD;
				tmfz:entity.get(&quot;tmfz&quot;),&#xD;
				tmnd:entity.get(&quot;tmnd&quot;),&#xD;
				tmly:entity.get(&quot;tmly&quot;),&#xD;
				mode:entity.get(&quot;mode&quot;),&#xD;
				user:entity.get(&quot;user&quot;),&#xD;
				dept:entity.get(&quot;dept&quot;)&#xD;
			});&#xD;
		}&#xD;
	});&#xD;
	view.get('#optsGrid').unselectAll();&#xD;
}&#xD;
</ClientEvent>
                        <Property name="icon">url(>skin>common/icons.gif) -20px -300px</Property>
                      </Button>
                      <Button>
                        <ClientEvent name="onClick">var entitys = view.get('#chosedGrid.selection');&#xD;
if(entitys != &quot;&quot; || entitys != undefined){&#xD;
	entitys.each(function(entity){&#xD;
		entity.remove();&#xD;
	});&#xD;
}</ClientEvent>
                        <Property name="icon">url(>skin>common/icons.gif) -40px -300px</Property>
                      </Button>
                    </Container>
                  </Container>
                </SideControl>
              </SplitPanel>
            </MainControl>
            <SideControl>
              <GroupBox>
                <Property name="caption">推送题目</Property>
                <Buttons/>
                <Children>
                  <SplitPanel>
                    <Property name="position">30%</Property>
                    <MainControl>
                      <Container>
                        <ToolBar>
                          <DataPilot>
                            <Property name="dataSet">dsTktmShow</Property>
                            <Property name="itemCodes">pages</Property>
                          </DataPilot>
                        </ToolBar>
                        <DataGrid id="optsGrid">
                          <Property name="dataSet">dsTktmShow</Property>
                          <Property name="readOnly">true</Property>
                          <Property name="selectionMode">multiRows</Property>
                          <RowSelectorColumn/>
                          <RowNumColumn/>
                          <DataColumn name="tkfl">
                            <Property name="property">tkfl</Property>
                          </DataColumn>
                          <DataColumn name="createDate">
                            <Property name="property">createDate</Property>
                          </DataColumn>
                          <DataColumn name="content">
                            <Property name="property">content</Property>
                          </DataColumn>
                          <DataColumn name="tmfz">
                            <Property name="property">tmfz</Property>
                          </DataColumn>
                          <DataColumn name="tmnd">
                            <Property name="property">tmnd</Property>
                          </DataColumn>
                          <DataColumn name="tmly">
                            <Property name="property">tmly</Property>
                          </DataColumn>
                          <DataColumn name="mode">
                            <Property name="property">mode</Property>
                          </DataColumn>
                          <DataColumn name="user">
                            <Property name="property">user</Property>
                          </DataColumn>
                          <DataColumn name="dept">
                            <Property name="property">dept</Property>
                          </DataColumn>
                        </DataGrid>
                      </Container>
                    </MainControl>
                    <SideControl>
                      <DataTreeGrid id="tkfltree2">
                        <ClientEvent name="onClick">var dsTktmShow = view.get(&quot;#dsTktmShow&quot;);&#xD;
var flid = view.get(&quot;#dsTkfl&quot;).getData(&quot;!current_Node&quot;).get(&quot;id&quot;)&#xD;
dsTktmShow.set(&quot;parameter&quot;,{&#xD;
	flid: flid&#xD;
})&#xD;
dsTktmShow.flushAsync();</ClientEvent>
                        <Property name="currentNodeDataPath">current_Node</Property>
                        <Property name="dataSet">dsTkfl</Property>
                        <Property name="dataType">tkflType</Property>
                        <Property name="treeColumn">tkmc</Property>
                        <Property name="readOnly">true</Property>
                        <BindingConfigs>
                          <BindingConfig>
                            <Property name="recursive">true</Property>
                            <Property name="childrenProperty">child</Property>
                            <Property name="icon">url(>skin>common/icons.gif) -160px -80px</Property>
                            <Property name="expandLevel">2</Property>
                          </BindingConfig>
                        </BindingConfigs>
                        <Columns>
                          <DataColumn>
                            <Property name="name">tkmc</Property>
                            <Property name="property">tkmc</Property>
                            <Editor/>
                          </DataColumn>
                        </Columns>
                      </DataTreeGrid>
                    </SideControl>
                  </SplitPanel>
                </Children>
              </GroupBox>
            </SideControl>
          </SplitPanel>
        </Children>
        <Tools/>
      </Dialog>
    </Container>
    <Container id="actions">
      <AjaxAction id="tsAction">
        <Property name="service">zstkglController#updateKstsjlInfo</Property>
      </AjaxAction>
      <AjaxAction id="updateAction">
        <Property name="service">zstkglController#updateKstsjlDetailInfo</Property>
      </AjaxAction>
      <AjaxAction id="deleteAction">
        <Property name="service">zstkglController#deleteKstsjlInfo</Property>
      </AjaxAction>
    </Container>
    <Container id="dropdowns">
      <CustomDropDown id="groupDropDown">
        <Panel>
          <Property name="height">200</Property>
          <Buttons/>
          <Children>
            <GroupBox>
              <Buttons>
                <Button>
                  <ClientEvent name="onClick">/*&#xD;
var dropDown = dorado.widget.DropDown.findDropDown(self);&#xD;
var node = self.get(&quot;currentNode&quot;);&#xD;
var id = node.get(&quot;data&quot;).get(&quot;id&quot;);&#xD;
dropDown.close(&#xD;
	node.get(&quot;data&quot;).get(&quot;groupName&quot;)&#xD;
);&#xD;
view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;).set({groupId:id});&#xD;
*/&#xD;
var grouptree = view.get(&quot;#grouptree&quot;);&#xD;
var dropDown = dorado.widget.DropDown.findDropDown(grouptree);&#xD;
var entity = view.get('#grouptree.selection');&#xD;
var group=[]&#xD;
var id=[];&#xD;
entity.each(function(e){&#xD;
	group.push(e.get(&quot;data&quot;).get(&quot;groupName&quot;));&#xD;
	id.push(e.get(&quot;data&quot;).get(&quot;id&quot;))&#xD;
});&#xD;
dropDown.close(&#xD;
	group&#xD;
);&#xD;
view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;).set({groupId:id});</ClientEvent>
                  <Property name="caption">确定</Property>
                </Button>
                <Button>
                  <ClientEvent name="onClick">view.get(&quot;#groupDropDown&quot;).close();&#xD;
view.get(&quot;#grouptree&quot;).unselectAll();</ClientEvent>
                  <Property name="caption">取消</Property>
                </Button>
              </Buttons>
              <Children>
                <DataTreeGrid id="grouptree">
                  <Property name="dataSet">dsGroupt</Property>
                  <Property name="readOnly">true</Property>
                  <Property name="treeColumn">groupName</Property>
                  <Property name="selectionMode">multiRows</Property>
                  <BindingConfigs>
                    <BindingConfig>
                      <Property name="childrenProperty">child</Property>
                      <Property name="name">groupName</Property>
                      <Property name="labelProperty">groupName</Property>
                      <Property name="recursive">true</Property>
                    </BindingConfig>
                  </BindingConfigs>
                  <Columns>
                    <RowSelectorColumn/>
                    <DataColumn>
                      <Property name="name">groupName</Property>
                      <Editor/>
                    </DataColumn>
                  </Columns>
                </DataTreeGrid>
              </Children>
            </GroupBox>
          </Children>
          <Tools/>
        </Panel>
      </CustomDropDown>
      <CustomDropDown id="groupDropDown2">
        <Panel>
          <Property name="height">200</Property>
          <Buttons/>
          <Children>
            <GroupBox>
              <Buttons>
                <Button>
                  <ClientEvent name="onClick">/*&#xD;
var dropDown = dorado.widget.DropDown.findDropDown(self);&#xD;
var node = self.get(&quot;currentNode&quot;);&#xD;
var id = node.get(&quot;data&quot;).get(&quot;id&quot;);&#xD;
dropDown.close(&#xD;
	node.get(&quot;data&quot;).get(&quot;groupName&quot;)&#xD;
);&#xD;
view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;).set({groupId:id});&#xD;
*/&#xD;
var grouptree = view.get(&quot;#grouptree2&quot;);&#xD;
var dropDown = dorado.widget.DropDown.findDropDown(grouptree);&#xD;
var entity = view.get('#grouptree2.selection');&#xD;
var group=[]&#xD;
var id=[];&#xD;
entity.each(function(e){&#xD;
	group.push(e.get(&quot;data&quot;).get(&quot;groupName&quot;));&#xD;
	id.push(e.get(&quot;data&quot;).get(&quot;id&quot;))&#xD;
});&#xD;
dropDown.close(&#xD;
	group&#xD;
);&#xD;
view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;).set({groupId:id});</ClientEvent>
                  <Property name="caption">确定</Property>
                </Button>
                <Button>
                  <ClientEvent name="onClick">view.get(&quot;#groupDropDown2&quot;).close();&#xD;
view.get(&quot;#grouptree2&quot;).unselectAll();</ClientEvent>
                  <Property name="caption">取消</Property>
                </Button>
              </Buttons>
              <Children>
                <DataTreeGrid id="grouptree2">
                  <Property name="dataSet">dsGroupt</Property>
                  <Property name="readOnly">true</Property>
                  <Property name="treeColumn">groupName</Property>
                  <Property name="selectionMode">multiRows</Property>
                  <BindingConfigs>
                    <BindingConfig>
                      <Property name="childrenProperty">child</Property>
                      <Property name="name">groupName</Property>
                      <Property name="labelProperty">groupName</Property>
                      <Property name="recursive">true</Property>
                    </BindingConfig>
                  </BindingConfigs>
                  <Columns>
                    <RowSelectorColumn/>
                    <DataColumn>
                      <Property name="name">groupName</Property>
                      <Editor/>
                    </DataColumn>
                  </Columns>
                </DataTreeGrid>
              </Children>
            </GroupBox>
          </Children>
          <Tools/>
        </Panel>
      </CustomDropDown>
    </Container>
    <Container>
      <GroupBox>
        <Property name="caption">考试题目信息</Property>
        <Buttons/>
        <Children>
          <ToolBar>
            <DataPilot>
              <Property name="dataSet">dsExam</Property>
              <Property name="itemCodes">pages</Property>
            </DataPilot>
            <Button>
              <ClientEvent name="onClick">view.get(&quot;#dsCondition&quot;).insert();&#xD;
view.get(&quot;#conditionDialog&quot;).show();&#xD;
</ClientEvent>
              <Property name="caption">考试题目推送</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -60px</Property>
            </Button>
            <Button>
              <ClientEvent name="onClick">var data = view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;);&#xD;
if(data != undefined){&#xD;
	view.get(&quot;#dsDetail&quot;).set(&quot;parameter&quot;,{&quot;id&quot;:data.get(&quot;id&quot;)});&#xD;
	view.get(&quot;#ytsDialog&quot;).show();&#xD;
	view.get(&quot;#dsDetail&quot;).flushAsync();&#xD;
}&#xD;
</ClientEvent>
              <Property name="caption">查看已推送题目</Property>
              <Property name="icon">url(>skin>common/icons.gif) -40px -100px</Property>
            </Button>
            <Button>
              <ClientEvent name="onClick">view.get(&quot;#updateDialog&quot;).show();&#xD;
</ClientEvent>
              <Property name="caption">修改</Property>
              <Property name="icon">url(>skin>common/icons.gif) -200px -0px</Property>
            </Button>
            <Button>
              <ClientEvent name="onClick">dorado.MessageBox.confirm(&quot;真的要删除当前数据？&quot;,function(){&#xD;
	var examid = view.get(&quot;#dsExam&quot;).getData(&quot;#&quot;).get(&quot;id&quot;);&#xD;
	view.get(&quot;#deleteAction&quot;).set(&quot;parameter&quot;,examid);&#xD;
	view.get(&quot;#deleteAction&quot;).execute(function(){&#xD;
		view.get(&quot;#dsExam&quot;).flushAsync();&#xD;
	});&#xD;
});&#xD;
</ClientEvent>
              <Property name="caption">删除</Property>
              <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
            </Button>
          </ToolBar>
          <DataGrid>
            <Property name="dataSet">dsExam</Property>
            <Property name="readOnly">true</Property>
            <RowNumColumn/>
            <DataColumn name="startTime">
              <Property name="property">startTime</Property>
            </DataColumn>
            <DataColumn name="endTime">
              <Property name="property">endTime</Property>
            </DataColumn>
            <DataColumn name="title">
              <Property name="property">title</Property>
            </DataColumn>
            <DataColumn name="examType">
              <Property name="property">examType</Property>
            </DataColumn>
            <DataColumn name="fqr">
              <Property name="property">fqr.user_Name</Property>
            </DataColumn>
            <DataColumn name="group">
              <Property name="property">group.groupName</Property>
            </DataColumn>
          </DataGrid>
        </Children>
      </GroupBox>
    </Container>
  </View>
</ViewConfig>
