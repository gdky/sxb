<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="zsdtsjlInfoType">
      <PropertyDef name="tsrq">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
        <Property name="label">描述</Property>
      </PropertyDef>
      <PropertyDef name="groupId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="groupname">
        <Property name="label">群组名称</Property>
      </PropertyDef>
    </DataType>
    <DataType name="groupType">
      <Property name="creationType">gov.hygs.htgl.entity.Grouptable</Property>
      <PropertyDef name="id">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="groupName">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="zszskType">
      <Property name="creationType">gov.hygs.htgl.entity.ZskJl</Property>
      <PropertyDef name="id">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="userId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <Reference name="user">
        <Property name="dataType">[userType]</Property>
        <Property name="parameter">$${this.userId}</Property>
        <Property name="dataProvider">yxtkglController#getUserInfoByUserId</Property>
      </Reference>
      <PropertyDef name="createDate">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="spDate">
        <Property name="dataType">Date</Property>
      </PropertyDef>
      <PropertyDef name="sprId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="deptid">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <Reference name="dept">
        <Property name="dataType">[deptType]</Property>
        <Property name="dataProvider">yxtkglController#getDeptInfoByDeptId</Property>
        <Property name="parameter">$${this.deptid}</Property>
      </Reference>
      <PropertyDef name="content">
        <Property></Property>
        <Property name="label">内容</Property>
      </PropertyDef>
      <PropertyDef name="zsklyId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <Reference name="zskly">
        <Property name="dataType">[zsklyType]</Property>
        <Property name="parameter">$${this.zsklyId}</Property>
        <Property name="dataProvider">yxzskController#getZsklyInfoByZsklyId</Property>
      </Reference>
      <PropertyDef name="title">
        <Property></Property>
        <Property name="label">知识库题目</Property>
      </PropertyDef>
      <PropertyDef name="yxbz">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="xybz">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="zsklyType">
      <Property name="creationType">gov.hygs.htgl.entity.Zskly</Property>
      <PropertyDef name="id">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="title">
        <Property></Property>
        <Property name="label">来源</Property>
      </PropertyDef>
      <PropertyDef name="content">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="attachment">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="deptType">
      <Property name="creationType">gov.hygs.htgl.entity.Dept</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="dept_name">
        <Property></Property>
        <Property name="label">部门名称</Property>
      </PropertyDef>
      <PropertyDef name="parentId">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property></Property>
      </PropertyDef>
      <Reference name="dept">
        <Property name="dataType">[SELF]</Property>
        <Property name="dataProvider">qzBmCdglController#getCurrentDeptById</Property>
        <Property name="parameter">$${this.id_}</Property>
      </Reference>
      <Reference name="user">
        <Property name="dataType">[userType]</Property>
        <Property name="parameter">$${this.id_}</Property>
        <Property name="dataProvider">yxtkglController#getUserByDeptId</Property>
      </Reference>
    </DataType>
    <DataType name="userType">
      <Property name="creationType">gov.hygs.htgl.entity.User</Property>
      <PropertyDef name="id_">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="user_Name">
        <Property></Property>
        <Property name="label">录入人</Property>
      </PropertyDef>
    </DataType>
    <DataType name="tsxxType">
      <PropertyDef name="tsr">
        <Property name="label">推送人</Property>
      </PropertyDef>
      <PropertyDef name="tsrq">
        <Property name="dataType">Date</Property>
        <Property name="label">推送日期</Property>
      </PropertyDef>
      <PropertyDef name="groupname">
        <Property name="label">群组</Property>
      </PropertyDef>
      <PropertyDef name="ms">
        <Property name="label">描述</Property>
      </PropertyDef>
      <PropertyDef name="tsrid"/>
    </DataType>
    <DataType name="detialType">
      <PropertyDef name="create_date">
        <Property name="dataType">Date</Property>
        <Property name="label">创建时间</Property>
      </PropertyDef>
      <PropertyDef name="content">
        <Property></Property>
        <Property name="label">内容</Property>
      </PropertyDef>
      <PropertyDef name="zsklyname">
        <Property name="label">来源</Property>
      </PropertyDef>
      <PropertyDef name="username">
        <Property name="label">录入人</Property>
      </PropertyDef>
      <PropertyDef name="deptname">
        <Property name="label">部门名称</Property>
      </PropertyDef>
      <PropertyDef name="title">
        <Property name="label">知识库题目</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <Container id="datasets">
      <DataSet id="dsZsdtsjlInfo">
        <Property name="dataType">[zsdtsjlInfoType]</Property>
      </DataSet>
      <DataSet id="dsGroupt">
        <Property name="dataProvider">qzBmCdglController#getGrouptableInfo</Property>
        <Property name="dataType">[groupType]</Property>
      </DataSet>
      <DataSet id="dsZszskFilter">
        <Property name="dataType">[zszskType]</Property>
        <Property name="pageSize">10</Property>
        <Property name="dataProvider">zszskController#getRandomdsZszskFilter</Property>
      </DataSet>
      <DataSet id="dsZsdtsValue">
        <Property name="dataProvider">zszskController#getZsdtsInfoFromSystemProps</Property>
      </DataSet>
      <DataSet id="dsZskly">
        <Property name="dataType">[zsklyType]</Property>
        <Property name="dataProvider">yxzskController#getZsklyInfoByZsklyId</Property>
      </DataSet>
      <DataSet id="dsDept">
        <Property name="dataType">[deptType]</Property>
        <Property name="dataProvider">qzBmCdglController#getDeptRoot</Property>
      </DataSet>
      <DataSet id="dsUser">
        <Property name="dataProvider">yxtkglController#getUserByDeptId</Property>
        <Property name="dataType">[userType]</Property>
      </DataSet>
      <DataSet id="dsTsxx">
        <Property name="dataType">[tsxxType]</Property>
        <Property name="pageSize">10</Property>
        <Property name="dataProvider">zszskController#getTsxxInfo</Property>
      </DataSet>
      <DataSet id="dsDetail">
        <Property name="dataType">[detialType]</Property>
        <Property name="pageSize">10</Property>
        <Property name="dataProvider">zszskController#getZsdDetailInfo</Property>
      </DataSet>
    </Container>
    <Container id="dropdowns">
      <DataSetDropDown id="groupDropDown">
        <ClientEvent name="onClose">var group = view.get(&quot;#dsGroupt&quot;).getData(&quot;#&quot;);&#xD;
if(group != undefined){&#xD;
	//view.get(&quot;#dsCondition&quot;).getData(&quot;#&quot;).set({groupId:group.get(&quot;id&quot;)});&#xD;
	view.get(&quot;#dsZsdtsjlInfo&quot;).getData(&quot;#&quot;).set({groupId:group.get(&quot;id&quot;)});&#xD;
}</ClientEvent>
        <Property name="dataSet">dsGroupt</Property>
        <Property name="property">groupName</Property>
      </DataSetDropDown>
    </Container>
    <Container id="dialogs">
      <Dialog id="zsdtsDialog">
        <Property name="width">400</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">推送信息</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#zskDialog&quot;).show();&#xD;
</ClientEvent>
                <Property name="caption">查看推送题目</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -100px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#zsdtsDialog&quot;).close();&#xD;
view.get(&quot;#dsZsdtsjlInfo&quot;).getData(&quot;#&quot;).cancel();&#xD;
view.get(&quot;#dsZszskFilter&quot;).flush();&#xD;
</ClientEvent>
                <Property name="caption">取消</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <AutoForm id="conditonForm">
                <Property name="dataSet">dsZsdtsjlInfo</Property>
                <Property name="cols">*</Property>
                <AutoFormElement>
                  <Property name="name">groupname</Property>
                  <Property name="property">groupname</Property>
                  <Property name="trigger">groupDropDown</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">ms</Property>
                  <Property name="property">ms</Property>
                  <Editor>
                    <TextArea/>
                  </Editor>
                </AutoFormElement>
              </AutoForm>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="zskDialog">
        <Property name="height">500</Property>
        <Property name="width">700</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">推送题目</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">var condition = view.get(&quot;#dsZsdtsjlInfo&quot;).getData(&quot;#&quot;);&#xD;
&#xD;
var id = [];&#xD;
view.get(&quot;#dsZszskFilter&quot;).getData().each(function(entity){&#xD;
	id.push(entity.get(&quot;id&quot;));&#xD;
});&#xD;
&#xD;
if(condition.get(&quot;groupname&quot;) == &quot;&quot; || condition.get(&quot;groupname&quot;) == undefined){&#xD;
	condition.set({groupId:null});&#xD;
	condition.set({groupname:null});&#xD;
}&#xD;
view.get(&quot;#tsAction&quot;).set(&quot;parameter&quot;,{&#xD;
	&quot;id&quot;:id,&#xD;
	&quot;tsrq&quot;:condition.get(&quot;tsrq&quot;),&#xD;
	&quot;ms&quot;:condition.get(&quot;ms&quot;),&#xD;
	&quot;groupId&quot;:condition.get(&quot;groupId&quot;),&#xD;
	&quot;groupname&quot;:condition.get(&quot;groupname&quot;)&#xD;
});&#xD;
&#xD;
view.get(&quot;#tsAction&quot;).execute(function(){&#xD;
	view.get(&quot;#zsdtsDialog&quot;).close();&#xD;
	view.get(&quot;#zskDialog&quot;).close();&#xD;
	view.get(&quot;#dsZszskFilter&quot;).flush();&#xD;
	view.get(&quot;#dsTsxx&quot;).flush();&#xD;
});&#xD;
</ClientEvent>
                <Property name="caption">提交</Property>
                <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#zskDialog&quot;).close();&#xD;
&#xD;
</ClientEvent>
                <Property name="caption">取消</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <ToolBar>
                <DataPilot>
                  <Property name="dataSet">dsZszskFilter</Property>
                  <Property name="itemCodes">pages</Property>
                </DataPilot>
              </ToolBar>
              <DataGrid>
                <Property name="dataSet">dsZszskFilter</Property>
                <Property name="readOnly">true</Property>
                <DataColumn name="createDate">
                  <Property name="property">createDate</Property>
                </DataColumn>
                <DataColumn name="content">
                  <Property name="property">content</Property>
                </DataColumn>
                <DataColumn name="zskly">
                  <Property name="property">zskly.title</Property>
                </DataColumn>
                <DataColumn name="user">
                  <Property name="property">user.user_Name</Property>
                </DataColumn>
                <DataColumn name="dept">
                  <Property name="property">dept.dept_name</Property>
                </DataColumn>
                <DataColumn name="title">
                  <Property name="property">title</Property>
                </DataColumn>
              </DataGrid>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
      <Dialog id="tsxxDialog">
        <Property name="width">700</Property>
        <Property name="height">500</Property>
        <Buttons/>
        <Children>
          <GroupBox>
            <Property name="caption">已推送题目</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#tsxxDialog&quot;).close();&#xD;
</ClientEvent>
                <Property name="caption">关闭</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
              </Button>
            </Buttons>
            <Children>
              <ToolBar>
                <DataPilot>
                  <Property name="dataSet">dsDetail</Property>
                  <Property name="itemCodes">pages</Property>
                </DataPilot>
              </ToolBar>
              <DataGrid>
                <Property name="dataSet">dsDetail</Property>
                <Property name="readOnly">true</Property>
                <DataColumn name="create_date">
                  <Property name="property">create_date</Property>
                </DataColumn>
                <DataColumn name="content">
                  <Property name="property">content</Property>
                </DataColumn>
                <DataColumn name="zsklyname">
                  <Property name="property">zsklyname</Property>
                </DataColumn>
                <DataColumn name="username">
                  <Property name="property">username</Property>
                </DataColumn>
                <DataColumn name="deptname">
                  <Property name="property">deptname</Property>
                </DataColumn>
                <DataColumn name="title">
                  <Property name="property">title</Property>
                </DataColumn>
              </DataGrid>
            </Children>
          </GroupBox>
        </Children>
        <Tools/>
      </Dialog>
    </Container>
    <Container id="actions">
      <AjaxAction id="tsAction">
        <Property name="service">zszskController#updateZsdtsInfo</Property>
      </AjaxAction>
    </Container>
    <Container>
      <GroupBox>
        <Property name="caption">知识库信息表</Property>
        <Buttons/>
        <Children>
          <ToolBar>
            <DataPilot>
              <Property name="dataSet">dsTsxx</Property>
              <Property name="itemCodes">pages</Property>
            </DataPilot>
            <Button>
              <ClientEvent name="onClick">view.get(&quot;#dsZsdtsjlInfo&quot;).insert();&#xD;
view.get(&quot;#zsdtsDialog&quot;).show();&#xD;
</ClientEvent>
              <Property name="caption">知识点推送</Property>
              <Property name="hideMode">display</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -60px</Property>
            </Button>
            <Button>
              <ClientEvent name="onClick">var data = view.get(&quot;#dsTsxx&quot;).getData(&quot;#&quot;);&#xD;
if(data != undefined){&#xD;
	view.get(&quot;#dsDetail&quot;).set(&quot;parameter&quot;,{&quot;id&quot;:data.get(&quot;tsrid&quot;)});&#xD;
	view.get(&quot;#tsxxDialog&quot;).show();&#xD;
	view.get(&quot;#dsDetail&quot;).flushAsync();&#xD;
}&#xD;
</ClientEvent>
              <Property name="caption">查看已推送题目</Property>
              <Property name="icon">url(>skin>common/icons.gif) -40px -100px</Property>
            </Button>
          </ToolBar>
          <DataGrid>
            <Property name="dataSet">dsTsxx</Property>
            <DataColumn name="tsr">
              <Property name="property">tsr</Property>
            </DataColumn>
            <DataColumn name="tsrq">
              <Property name="property">tsrq</Property>
            </DataColumn>
            <DataColumn name="groupname">
              <Property name="property">groupname</Property>
            </DataColumn>
            <DataColumn name="ms">
              <Property name="property">ms</Property>
            </DataColumn>
          </DataGrid>
        </Children>
      </GroupBox>
    </Container>
  </View>
</ViewConfig>
